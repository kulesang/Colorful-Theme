import{u as V,b as p,f as N,h as n,i as s,n as i,k as c,j as r,t as a,F as T,x as E,l as M,w as D,m as P,o as d,z as F,a as v,q as R}from"./index-BHLHUR5A.js";import{h as S,i as H}from"./user-FJ3EB781.js";import{_ as U}from"./_plugin-vue_export-helper-CmQR6YpH.js";import{C as X}from"./clipboard-list-Ckbsg3jW.js";import{c as f}from"./createLucideIcon-x2htp3p0.js";import{C as L}from"./credit-card-CIV6o_Hd.js";import{C as Z}from"./circle-check-big-CeLH3ylp.js";import{C as A}from"./clock-BGEjJi95.js";import{C as G}from"./circle-x-xyPX_TCM.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=f("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=f("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=f("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),W={class:"orders-page"},Y={class:"page-header"},x={class:"header-icon"},ss={key:0,class:"orders-container"},es={class:"order-header"},as={class:"order-info"},ts={class:"order-id"},os={class:"order-amount"},ds={class:"order-body"},ns={class:"order-item"},ls={class:"label"},is={class:"value"},rs={class:"order-item"},cs={class:"label"},us={class:"value"},_s={class:"order-item"},hs={class:"label"},ps={class:"value"},vs={class:"order-footer"},ms=["onClick"],ys=["onClick"],bs=["onClick"],fs={key:1,class:"loading-state"},ks={key:2,class:"empty-state"},$s={class:"modal-title"},gs={key:0,class:"details-content"},Cs={class:"status-icon"},zs={class:"status-text"},ws={key:0},Ms={key:1},Ds={class:"details-section"},Fs={class:"info-grid"},Ls={class:"info-item"},Is={class:"label"},Os={class:"value"},js={class:"info-item"},qs={class:"label"},Bs={class:"value"},Vs={key:0,class:"info-item"},Ns={class:"label"},Ts={class:"value"},Es={class:"details-section"},Ps={class:"info-grid"},Rs={class:"info-item"},Ss={class:"label"},Hs={class:"value"},Us={class:"info-item"},Xs={class:"label"},Zs={class:"value"},As={class:"details-section"},Gs={class:"info-grid"},Js={class:"info-item"},Ks={class:"label"},Qs={class:"value"},Ws={key:0,class:"info-item"},Ys={class:"label"},xs={class:"value discount"},se={class:"info-item total"},ee={class:"label"},ae={class:"value"},te={key:0,class:"details-actions"},oe={__name:"Orders",setup(de){const k=P(),{t:m}=V(),_=p([]),h=p(!0),u=p(!1),t=p(null);N(async()=>{try{const e=await S();e.data&&(_.value=e.data)}catch{}finally{h.value=!1}});const $=e=>{const b={0:"pending",1:"processing",2:"cancelled",3:"completed",4:"discounted"}[e]||"unknown";return m(`dashboard.orders.status.${b}`)},g=e=>({0:"pending",1:"processing",2:"cancelled",3:"completed",4:"discounted"})[e]||"",C=e=>m(`dashboard.plans.cycles.${e}`),y=e=>e?new Date(e*1e3).toLocaleString():"--",I=e=>{k.push({path:"/order",query:{trade_no:e.trade_no}})},O=()=>{t.value&&(u.value=!1,k.push({path:"/order",query:{trade_no:t.value.trade_no}}))},j=e=>{t.value=e,u.value=!0},q=async e=>{try{await H({trade_no:e.trade_no}),R.success(m("dashboard.orders.cancelledMessage")),_.value=_.value.filter(l=>l.trade_no!==e.trade_no),u.value&&(u.value=!1)}catch{}};return(e,l)=>{const b=M("a-spin"),B=M("a-modal");return d(),n("div",W,[s("div",Y,[s("div",x,[c(r(X),{size:32})]),s("h1",null,a(e.$t("dashboard.orders.title")),1),s("p",null,a(e.$t("dashboard.orders.description")),1)]),h.value?i("",!0):(d(),n("div",ss,[(d(!0),n(T,null,E(_.value,o=>{var z;return d(),n("div",{key:o.trade_no,class:"order-card glass-card"},[s("div",es,[s("div",as,[s("span",ts,"#"+a(o.trade_no),1),s("span",{class:F(["order-status",g(o.status)])},a($(o.status)),3)]),s("div",os,"Â¥"+a((o.total_amount/100).toFixed(2)),1)]),s("div",ds,[s("div",ns,[s("span",ls,a(e.$t("dashboard.orders.item.plan")),1),s("span",is,a((z=o.plan)==null?void 0:z.name),1)]),s("div",rs,[s("span",cs,a(e.$t("dashboard.orders.item.cycle")),1),s("span",us,a(C(o.period)),1)]),s("div",_s,[s("span",hs,a(e.$t("dashboard.orders.item.created")),1),s("span",ps,a(y(o.created_at)),1)])]),s("div",vs,[s("button",{class:"action-btn secondary",onClick:w=>j(o)},[c(r(J),{size:16}),s("span",null,a(e.$t("dashboard.orders.viewDetails")),1)],8,ms),o.status===0?(d(),n("button",{key:0,class:"action-btn primary",onClick:w=>I(o)},[c(r(L),{size:16}),s("span",null,a(e.$t("dashboard.orders.pay")),1)],8,ys)):i("",!0),o.status===0?(d(),n("button",{key:1,class:"action-btn danger",onClick:w=>q(o)},a(e.$t("dashboard.orders.cancel")),9,bs)):i("",!0)])])}),128))])),h.value?(d(),n("div",fs,[c(b,{size:"large"})])):i("",!0),!h.value&&_.value.length===0?(d(),n("div",ks,[l[1]||(l[1]=s("div",{class:"empty-icon"},"ðŸ“‹",-1)),s("p",null,a(e.$t("dashboard.orders.noOrders")),1)])):i("",!0),c(B,{open:u.value,"onUpdate:open":l[0]||(l[0]=o=>u.value=o),footer:null,width:700,centered:"",class:"order-details-modal"},{title:D(()=>[s("div",$s,[c(r(Q),{size:20}),s("span",null,a(e.$t("dashboard.orders.orderDetails")),1)])]),default:D(()=>{var o;return[t.value?(d(),n("div",gs,[s("div",{class:F(["status-banner",g(t.value.status)])},[s("div",Cs,[t.value.status===3?(d(),v(r(Z),{key:0,size:24})):t.value.status===0?(d(),v(r(A),{key:1,size:24})):t.value.status===1?(d(),v(r(K),{key:2,size:24})):(d(),v(r(G),{key:3,size:24}))]),s("div",zs,[s("h3",null,a($(t.value.status)),1),t.value.status===0?(d(),n("p",ws,a(e.$t("dashboard.orders.details.pendingTip")),1)):t.value.status===3?(d(),n("p",Ms,a(e.$t("dashboard.orders.details.completedTip")),1)):i("",!0)])],2),s("div",Ds,[s("h4",null,a(e.$t("dashboard.orders.details.orderInfo")),1),s("div",Fs,[s("div",Ls,[s("span",Is,a(e.$t("dashboard.orders.orderNumber")),1),s("span",Os,"#"+a(t.value.trade_no),1)]),s("div",js,[s("span",qs,a(e.$t("dashboard.orders.item.created")),1),s("span",Bs,a(y(t.value.created_at)),1)]),t.value.updated_at?(d(),n("div",Vs,[s("span",Ns,a(e.$t("dashboard.orders.details.updated")),1),s("span",Ts,a(y(t.value.updated_at)),1)])):i("",!0)])]),s("div",Es,[s("h4",null,a(e.$t("dashboard.orders.details.planInfo")),1),s("div",Ps,[s("div",Rs,[s("span",Ss,a(e.$t("dashboard.orders.item.plan")),1),s("span",Hs,a((o=t.value.plan)==null?void 0:o.name),1)]),s("div",Us,[s("span",Xs,a(e.$t("dashboard.orders.item.cycle")),1),s("span",Zs,a(C(t.value.period)),1)])])]),s("div",As,[s("h4",null,a(e.$t("dashboard.orders.details.paymentInfo")),1),s("div",Gs,[s("div",Js,[s("span",Ks,a(e.$t("dashboard.orders.details.subtotal")),1),s("span",Qs,"Â¥"+a((t.value.total_amount/100).toFixed(2)),1)]),t.value.discount_amount?(d(),n("div",Ws,[s("span",Ys,a(e.$t("dashboard.orders.details.discount")),1),s("span",xs,"-Â¥"+a((t.value.discount_amount/100).toFixed(2)),1)])):i("",!0),s("div",se,[s("span",ee,a(e.$t("dashboard.orders.details.total")),1),s("span",ae,"Â¥"+a((t.value.total_amount/100).toFixed(2)),1)])])]),t.value.status===0?(d(),n("div",te,[s("button",{class:"action-btn primary full-width",onClick:O},[c(r(L),{size:18}),s("span",null,a(e.$t("dashboard.orders.pay")),1)])])):i("",!0)])):i("",!0)]}),_:1},8,["open"])])}}},ve=U(oe,[["__scopeId","data-v-1c7cea2c"]]);export{ve as default};
