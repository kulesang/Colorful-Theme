import{z as G,b as ss,C as Be,u as Me,A as as,c as g,e as f,f as ts,h as os,g as rs,i as l,p as C,j as e,l as p,k as u,t,n as ls,D as ze,B as ee,m as se,F as T,y as K,w as O,s as V,o,E as ns,a as $,q as P,G as is,H as ds,I as cs}from"./index-CUYkGM1Q.js";import{a as us,g as hs,b as ps,c as vs,d as Te,r as Oe,e as _s,f as ms,h as fs,i as bs}from"./user-sf-dS7fE.js";import{d as me}from"./marked.esm-DajSjiQI.js";import{Z as ys}from"./zap-off-BoMlxYUH.js";import{A as gs}from"./activity-Bp-zBECV.js";import{C as q}from"./calendar-CwKF2tPX.js";import{R as ks}from"./refresh-cw-CnvlGUv7.js";import{Z as ae}from"./zap-DTMZZTgX.js";import{C as ws}from"./copy-7qxbMDRD.js";import{C as Cs}from"./check-CBx0oiDA.js";import{C as Ss}from"./circle-check-BMOCoOY4.js";import{C as Ee}from"./credit-card-CkBjBqn4.js";import"./request-CrJ_HLQ3.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=G("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=G("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=G("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=G("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=G("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=G("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),xs="/images/clients/Clash.webp",Ds="/images/clients/Shadowrocket.webp",Rs="/images/clients/Singbox.svg",Ms="/images/clients/Surfboard.svg",zs="/images/clients/Surge.svg",Ts="/images/clients/Quantumult.webp",Os={class:"dark-tech-dashboard"},Es={key:0,class:"status-alerts animate-fade-in"},As={key:0,class:"alert-banner info"},Is={class:"alert-content"},Bs={class:"alert-text"},Ls={class:"alert-title"},Us={class:"alert-desc"},Js={key:1,class:"alert-banner error"},Vs={class:"alert-content"},Ps={class:"alert-text"},qs={class:"alert-title"},Hs={class:"alert-desc"},Fs={key:2,class:"alert-banner error"},Ks={class:"alert-content"},Gs={class:"alert-text"},js={class:"alert-title"},Ws={class:"alert-desc"},Qs={key:3,class:"alert-banner warning"},Xs={class:"alert-content"},Ys={class:"alert-text"},Zs={class:"alert-title"},ea={class:"alert-desc"},sa={key:4,class:"alert-banner warning"},aa={class:"alert-content"},ta={class:"alert-text"},oa={class:"alert-title"},ra={class:"alert-desc"},la={class:"bento-grid"},na={class:"subscription-hero glass-card bento-item lg:col-span-8"},ia={key:0,class:"hero-content"},da={class:"user-meta"},ca={class:"user-titles"},ua={class:"greeting"},ha={class:"user-info-row"},pa={class:"plan-tag"},va={class:"c-text"},_a={class:"c-text"},ma={class:"metric-grid"},fa={class:"metric-item glass-card"},ba={class:"m-header"},ya={class:"m-label"},ga={class:"m-value"},ka={key:0,class:"m-footer"},wa={class:"m-subtext"},Ca={class:"metric-item glass-card"},Sa={class:"m-header"},$a={class:"m-label"},Na={class:"m-value"},xa={key:0,class:"m-footer"},Da={class:"m-subtext"},Ra={key:1,class:"m-footer"},Ma={class:"m-subtext"},za={class:"metric-item glass-card highlight"},Ta={class:"m-header"},Oa={class:"m-label"},Ea={class:"m-value text-primary"},Aa={class:"m-footer"},Ia={class:"m-subtext"},Ba={key:1,class:"hero-skeleton-wrap"},La={key:2,class:"hero-empty-state"},Ua={class:"notification-wall glass-card bento-item lg:col-span-4"},Ja={class:"card-header"},Va={key:0,class:"notice-list"},Pa=["onClick"],qa={class:"n-body"},Ha={class:"n-title"},Fa={class:"n-time"},Ka={key:1,class:"notice-empty"},Ga={class:"subscribe-section glass-card bento-item lg:col-span-12"},ja={class:"sub-layout"},Wa={class:"sub-left"},Qa={class:"sub-section"},Xa={class:"link-input-group"},Ya=["value"],Za={class:"sub-section"},et={class:"quick-icons"},st={class:"qr-code-box"},at={class:"sub-right"},tt={class:"client-downloads"},ot=["href"],rt=["src","alt"],lt={class:"dl-info"},nt={class:"dl-name"},it={class:"dl-platform"},dt=["onClick"],ct={class:"modal-title-custom"},ut={class:"title-icon"},ht={class:"title-text"},pt={class:"promo-card"},vt={class:"promo-header"},_t=["innerHTML"],mt={class:"promo-body"},ft={class:"promo-desc"},bt={key:0,class:"promo-code-box"},yt={class:"code-label"},gt={class:"code-val"},kt={key:0,class:"promo-action"},wt=["innerHTML"],Ct={class:"notice-detail-footer"},St={class:"info-badge"},$t={class:"checkin-modal-content"},Nt={class:"checkin-header"},xt={class:"checkin-icon-wrap"},Dt={class:"checkin-title"},Rt={class:"checkin-subtitle"},Mt={class:"checkin-stats"},zt={class:"stat-card"},Tt={class:"stat-val"},Ot={class:"stat-lab"},Et={key:0,class:"streak-track"},At={class:"dot-inner"},It={key:1},Bt={key:1,class:"reward-box animate-bounce-in"},Lt={class:"reward-content"},Ut={class:"reward-icon-container"},Jt={class:"reward-info"},Vt={class:"reward-header-row"},Pt={class:"reward-label"},qt={key:0,class:"bonus-tag"},Ht={class:"reward-value"},Ft={class:"checkin-actions"},Kt={class:"redeem-modal-content"},Gt={class:"redeem-tabs"},jt={key:0,class:"redeem-pane"},Wt={class:"redeem-header"},Qt={class:"redeem-icon-wrap"},Xt={key:0,class:"redeem-title"},Yt={key:1,class:"redeem-title success"},Zt={key:0,class:"redeem-form-area"},eo={class:"redeem-input-section"},so=["placeholder","disabled"],ao={class:"redeem-actions"},to={key:1,class:"redeem-result-area animate-in"},oo={class:"result-badge"},ro={class:"result-desc"},lo={class:"reward-list-mini"},no={class:"reward-val"},io={key:1,class:"reward-item-simple"},co={key:1,class:"history-pane"},uo={key:0,class:"history-loading"},ho={key:1,class:"history-empty"},po={key:2,class:"history-empty"},vo={key:3,class:"history-list"},_o={class:"h-icon"},mo={class:"h-info"},fo={class:"h-top"},bo={class:"h-name"},yo={class:"h-time"},go={class:"h-bottom"},ko={class:"h-code"},wo={class:"modal-title"},Co={key:0,class:"doc-loading"},So=["innerHTML"],$o={components:{AQrcode:Be}},No=Object.assign($o,{__name:"Dashboard",setup(xo){me.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const D=ls(),{t:h}=Me(),Le=as(),ye=g(()=>Le.theme==="dark"),le=rs(),n=f(JSON.parse(localStorage.getItem("xboard_subscribe_info")||"null")),j=ts(JSON.parse(localStorage.getItem("xboard_user_info")||'{"email":""}')),te=f({}),A=f(JSON.parse(localStorage.getItem("xboard_notices")||"[]")),N=f(null),W=f(!1),ne=f(!1),b=f(null),ie=f(!1),de=f(!1),R=f(null),ce=f(!1),M=f(""),Q=f(!1),I=f("redeem"),oe=f([]),ue=f(!1),E=f(!0),ge=f(!1),z=f(null),X=f(!1),he=f(!1),B=f(null),ke=f(!1),{locale:Ue}=Me(),re=g(()=>!n.value||!n.value.plan_id),we=g(()=>!n.value||!n.value.expired_at||n.value.expired_at===0?!1:n.value.expired_at<Date.now()/1e3),pe=g(()=>{var s;return!((s=n.value)!=null&&s.expired_at)||n.value.expired_at===0?0:Math.ceil((n.value.expired_at-Date.now()/1e3)/(24*3600))}),Ce=g(()=>pe.value>0&&pe.value<=3),ve=g(()=>n.value?n.value.transfer_enable-(n.value.u+n.value.d)<=0:!1),Se=g(()=>!n.value||ve.value?!1:n.value.transfer_enable-(n.value.u+n.value.d)<1024*1024*1024),$e=s=>{if(s===0)return"0 B";const a=1024,d=["B","KB","MB","GB","TB"],v=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,v)).toFixed(2))+" "+d[v]},Je=g(()=>{if(re.value)return h("dashboard.home.noPlan");if(!n.value||!n.value.expired_at)return h("dashboard.home.forever");const s=n.value.expired_at-Date.now()/1e3;return s<=0?h("dashboard.home.expired"):Math.ceil(s/(24*3600))+" "+h("dashboard.home.daysLaterResetShort")}),Ve=g(()=>{if(re.value)return h("dashboard.home.noPlan");let s=n.value.reset_day;if(s!=null&&s!==0){s=Number(s);const a=new Date,d=a.getFullYear(),v=a.getMonth(),_=(w,S,U)=>{const J=new Date(w,S+1,0).getDate();return new Date(w,S,Math.min(U,J))};let k=_(d,v,s);if(a>=k){let w=v+1,S=d;w>11&&(w=0,S++),k=_(S,w,s)}const L=k-a;return Math.ceil(L/(1e3*60*60*24))+" "+h("dashboard.home.daysLaterResetShort")}return h("dashboard.home.forever")}),Ne=g(()=>{if(!n.value||!n.value.plan_id)return"";const s=n.value.reset_day;return s!=null&&s!==0?h("dashboard.home.resetDayNumberedShort",{day:s}):""}),xe=g(()=>{if(!n.value||!n.value.plan)return h("dashboard.home.trafficNoReset");const s=n.value.plan.reset_traffic_method;return h(s===0?"dashboard.home.trafficNoReset":s===1?"dashboard.home.trafficResetMonthly":s===2?"dashboard.home.trafficResetYearly":"dashboard.home.trafficReset")}),x=g(()=>{var s;if(!((s=N.value)!=null&&s.content))return null;try{const a=N.value.content.trim();if(a.startsWith("{")&&a.endsWith("}")){const d=JSON.parse(a);if(d&&d.cardComponent)return d}}catch{}return null}),Pe=g(()=>{var s;if(!((s=N.value)!=null&&s.content)||x.value)return"";try{return me.parse(N.value.content)}catch(a){return console.error("Markdown parsing error:",a),N.value.content}}),qe=s=>{N.value=s,W.value=!0},He=s=>{s&&(s.startsWith("http")?window.open(s,"_blank"):(D.push(s),W.value=!1))},Fe=()=>{if(ke.value||(ke.value=!0,!A.value||A.value.length===0))return;const s=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}"),a=A.value.find(d=>{if(s[d.id])return!1;if(d.tags){let v="";return typeof d.tags=="string"?v=d.tags:Array.isArray(d.tags)&&(v=d.tags.join(",")),v.includes("å¼¹çª—")||v.includes("popup")||v.includes("Popup")||v.includes("POPUP")}return!1});a&&setTimeout(()=>{N.value=a,W.value=!0,Ke(a.id)},500)},Ke=s=>{const a=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}");a[s]=Date.now(),localStorage.setItem("xboard_popup_notice_read",JSON.stringify(a))};os(async()=>{n.value||(ne.value=!0),await _e(),le.enableDailyCheckin&&await We(),Ye(),Fe(),ne.value=!1;try{const s=localStorage.getItem("xboard_client_config");s&&(te.value=JSON.parse(s));const d=await(await fetch("/clientConfig.json")).json();d.downloads&&(te.value=d.downloads,localStorage.setItem("xboard_client_config",JSON.stringify(d.downloads)))}catch{te.value={windows_android:{title:"Windows / Android",clients:[{name:"Clash Verge",platform:"Windows",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Surfboard",platform:"Android",icon:"/images/clients/Surfboard.svg",url:"https://manual.getsurfboard.com/",tutorial_url:"",tutorial_id:""}]},macos_ios:{title:"macOS / iOS",clients:[{name:"Clash Verge",platform:"macOS",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Shadowrocket",platform:"iOS",icon:"/images/clients/Shadowrocket.webp",url:"https://apps.apple.com/app/shadowrocket/id932747118",tutorial_url:"",tutorial_id:""}]}}}});const Ge=async s=>{if(s.tutorial_url){window.open(s.tutorial_url,"_blank");return}if(s.tutorial_id){B.value=null,X.value=!0,he.value=!0;try{const a=await _s({language:Ue.value==="zh-CN"?"zh-CN":"en"});if(a.data){let d=null;if(Object.keys(a.data).forEach(v=>{const _=a.data[v].find(k=>k.id==s.tutorial_id);_&&(d=_)}),d){B.value=d;try{const v=await ms({id:d.id});if(v.data){const _=v.data;B.value={...d,..._,body:_.body||_.content||d.body||d.content||""}}}catch(v){console.error("Fetch article detail failed:",v)}}else D.push({name:"Knowledge",query:{id:s.tutorial_id}}),X.value=!1}}catch{D.push({name:"Knowledge",query:{id:s.tutorial_id}}),X.value=!1}finally{he.value=!1}}else D.push("/knowledge")},je=g(()=>{var s;if(!((s=B.value)!=null&&s.body))return"";try{return me.parse(B.value.body)}catch{return B.value.body}}),_e=async()=>{try{const[s,a,d]=await Promise.all([us(),hs(),ps()]);s.data&&JSON.stringify(s.data)!==JSON.stringify(n.value)&&(n.value=s.data,localStorage.setItem("xboard_subscribe_info",JSON.stringify(s.data))),a.data&&JSON.stringify(a.data)!==JSON.stringify(j)&&(Object.assign(j,a.data),localStorage.setItem("xboard_user_info",JSON.stringify(a.data))),d.data&&JSON.stringify(d.data)!==JSON.stringify(A.value)&&(A.value=d.data,localStorage.setItem("xboard_notices",JSON.stringify(d.data)))}catch{}},We=async()=>{try{const s=await vs();s.data&&(b.value=s.data,s.data.checked_in_today&&(s.data.reward_type==="traffic"?R.value={type:"traffic",value:s.data.reward_traffic,unit:"MB"}:s.data.reward_type==="days"&&(R.value={type:"days",value:s.data.reward_days,unit:h("dashboard.home.checkinDays")})))}catch(s){console.error("Fetch checkin status error:",s)}},Qe=()=>{ie.value=!0},Xe=async()=>{var s;if(!((s=b.value)!=null&&s.checked_in_today)){de.value=!0;try{const a=await fs();a.data&&(b.value={checked_in_today:!0,streak_days:a.data.streak_days,reward_type:a.data.reward_type,reward_traffic:a.data.reward_traffic,reward_days:a.data.reward_days},a.data.reward_type==="traffic"?R.value={type:"traffic",value:a.data.reward_traffic,unit:"MB"}:R.value={type:"days",value:a.data.reward_days,unit:h("dashboard.home.checkinDays")},V.success(h("dashboard.home.checkinSuccess")),await _e())}catch{}finally{de.value=!1}}},Ye=async()=>{var d,v;let s=!1,a=!1;try{await Te({page:1,per_page:1},{hideError:!0}),s=!0,E.value=!0}catch(_){((d=_.response)==null?void 0:d.status)===404||_.code==="ERR_NETWORK"||!_.response?(s=!1,E.value=!1):(s=!0,E.value=!0)}try{await Oe({code:""},{hideError:!0}),a=!0}catch(_){((v=_.response)==null?void 0:v.status)===404||_.code==="ERR_NETWORK"||!_.response?a=!1:a=!0}ge.value=s||a},Ze=async()=>{var s;if(!(!E.value&&oe.value.length===0)){ue.value=!0;try{const a=await Te({page:1,per_page:20},{hideError:!0});a.data&&(oe.value=Array.isArray(a.data)?a.data:a.data.data||[],E.value=!0)}catch(a){(((s=a.response)==null?void 0:s.status)===404||a.code==="ERR_NETWORK"||!a.response)&&(E.value=!1,I.value==="history"&&(I.value="redeem"))}finally{ue.value=!1}}},De=async()=>{var _,k,L,F,w,S,U,J,Y,Z,c;if(!M.value)return;const s=j.balance||0,a=((_=n.value)==null?void 0:_.transfer_enable)||0,d=((k=n.value)==null?void 0:k.expired_at)||0,v=((L=n.value)==null?void 0:L.plan_id)||null;Q.value=!0;try{let i;try{i=await bs({code:M.value},{hideError:!0})}catch(r){const m=((F=r.response)==null?void 0:F.status)===404,y=!r.response&&(r.code==="ERR_NETWORK"||r.message==="Network Error");if(m||y)i=await Oe({code:M.value,giftcard:M.value},{hideError:!0});else throw r}if(i.data){if(await _e(),i.data===!0){const r=[],m=(j.balance||0)-s;m>0&&r.push({type:"balance",value:m,label:h("dashboard.settings.rewards.balance")});const y=(((w=n.value)==null?void 0:w.transfer_enable)||0)-a;y>0&&r.push({type:"traffic",value:y,label:h("dashboard.settings.rewards.traffic")});const Re=(((S=n.value)==null?void 0:S.expired_at)||0)-d;Re>0&&r.push({type:"expire",value:Math.ceil(Re/86400),label:h("dashboard.settings.rewards.expire")}),((U=n.value)==null?void 0:U.plan_id)!==v&&r.push({type:"plan",label:h("dashboard.settings.rewards.plan")}),z.value=r.length>0?{rewards:r}:{success:!0}}else if(i.data.rewards&&typeof i.data.rewards=="object"&&!Array.isArray(i.data.rewards)){const r=i.data.rewards,m=[];r.balance&&r.balance>0&&m.push({type:"balance",value:r.balance,label:h("dashboard.settings.rewards.balance")}),r.transfer_enable&&r.transfer_enable>0&&m.push({type:"traffic",value:r.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),r.expire_days&&r.expire_days>0&&m.push({type:"expire",value:r.expire_days,label:h("dashboard.settings.rewards.expire")}),r.device_limit&&r.device_limit>0&&m.push({type:"device",value:r.device_limit,label:"è®¾å¤‡æ•°é‡"}),r.plan_id&&m.push({type:"plan",value:i.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),z.value={...i.data,rewards:m}}else if(i.data.data){console.log("[ç¤¼å“å¡] æ£€æµ‹åˆ°XBoardçŽ°ä»£APIè¿”å›žæ ¼å¼");const r=i.data.data.rewards||{},m=[];r.balance&&r.balance>0&&m.push({type:"balance",value:r.balance,label:h("dashboard.settings.rewards.balance")}),r.transfer_enable&&r.transfer_enable>0&&m.push({type:"traffic",value:r.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),r.expire_days&&r.expire_days>0&&m.push({type:"expire",value:r.expire_days,label:h("dashboard.settings.rewards.expire")}),r.plan_id&&m.push({type:"plan",value:i.data.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),z.value={...i.data.data,rewards:m}}else z.value=i.data;V.success(h("dashboard.settings.redeemSuccess")),M.value=""}}catch(i){const r=((Y=(J=i.response)==null?void 0:J.data)==null?void 0:Y.message)||((c=(Z=i.response)==null?void 0:Z.data)==null?void 0:c.error),m={"The gift card has already been used by this user":h("dashboard.settings.giftCardUsedByUser"),"The gift card does not exist":h("dashboard.settings.giftCardNotFound"),"The gift card is not yet valid":h("dashboard.settings.giftCardNotValid"),"The gift card has expired":h("dashboard.settings.giftCardExpired"),"The gift card usage limit has been reached":h("dashboard.settings.giftCardUsedUp"),"Not suitable gift card type":"è¯¥ç¤¼å“å¡ç±»åž‹ä¸é€‚ç”¨äºŽæ‚¨å½“å‰çš„è®¢é˜…çŠ¶æ€","Unknown gift card type":"æœªçŸ¥çš„ç¤¼å“å¡ç±»åž‹"};m[r]?V.error(m[r]):V.error(r||h("common.error"))}finally{Q.value=!1}},es=()=>{var s;(s=n.value)!=null&&s.subscribe_url&&(navigator.clipboard.writeText(n.value.subscribe_url),V.success(h("dashboard.home.copySuccess")))},H=s=>{var _;if(!((_=n.value)!=null&&_.subscribe_url)){V.warning(h("dashboard.home.linkNotReady"));return}const a=encodeURIComponent(n.value.subscribe_url),d=le.siteName,v={clash:`clash://install-config?url=${a}&name=${encodeURIComponent(d)}`,shadowrocket:`shadowrocket://add/sub://${btoa(n.value.subscribe_url)}?remarks=${encodeURIComponent(d)}`,"quantumult-x":`quantumult-x:///add-resource?remote-resource=%7B%22server_remote%22:%5B%22${a},tag=${encodeURIComponent(d)}%22%5D%7D`,singbox:`sing-box://import-remote-profile?url=${a}#${encodeURIComponent(d)}`,surfboard:`surfboard:///install-config?url=${a}`,surge:`surge:///install-config?url=${a}`};v[s]&&(window.location.href=v[s],V.success(h("dashboard.home.jumpingToClient")))};return(s,a)=>{var F,w,S,U,J,Y,Z;const d=se("a-skeleton"),v=se("BookOpen"),_=se("a-modal"),k=se("a-button"),L=se("a-spin");return o(),l("div",Os,[re.value||we.value||ve.value||Ce.value||Se.value?(o(),l("div",Es,[re.value?(o(),l("div",As,[e("div",Is,[p(u(be),{size:20,class:"alert-icon"}),e("div",Bs,[e("span",Ls,t(s.$t("dashboard.home.noSubscriptionTitle")),1),e("span",Us,t(s.$t("dashboard.home.noSubscriptionDesc")),1)])]),e("button",{class:"alert-action",onClick:a[0]||(a[0]=c=>u(D).push("/plans"))},t(s.$t("dashboard.home.buyPlan")),1)])):we.value?(o(),l("div",Js,[e("div",Vs,[p(u(ze),{size:20,class:"alert-icon"}),e("div",Ps,[e("span",qs,t(s.$t("dashboard.home.planExpiredTitle")),1),e("span",Hs,t(s.$t("dashboard.home.planExpiredDesc")),1)])]),e("button",{class:"alert-action",onClick:a[1]||(a[1]=c=>u(D).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):ve.value?(o(),l("div",Fs,[e("div",Ks,[p(u(ys),{size:20,class:"alert-icon"}),e("div",Gs,[e("span",js,t(s.$t("dashboard.home.trafficOutTitle")),1),e("span",Ws,t(s.$t("dashboard.home.trafficOutDesc")),1)])]),e("button",{class:"alert-action",onClick:a[2]||(a[2]=c=>u(D).push("/plans"))},t(s.$t("dashboard.home.resetTraffic")),1)])):Ce.value?(o(),l("div",Qs,[e("div",Xs,[p(u(ze),{size:20,class:"alert-icon"}),e("div",Ys,[e("span",Zs,t(s.$t("dashboard.home.expiringSoonTitle")),1),e("span",ea,t(s.$t("dashboard.home.expiringSoonDesc",{days:pe.value})),1)])]),e("button",{class:"alert-action",onClick:a[3]||(a[3]=c=>u(D).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):Se.value?(o(),l("div",sa,[e("div",aa,[p(u(Ns),{size:20,class:"alert-icon"}),e("div",ta,[e("span",oa,t(s.$t("dashboard.home.trafficLowTitle")),1),e("span",ra,t(s.$t("dashboard.home.trafficLowDesc")),1)])]),e("button",{class:"alert-action",onClick:a[4]||(a[4]=c=>u(D).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):C("",!0)])):C("",!0),e("div",la,[e("div",na,[a[24]||(a[24]=e("div",{class:"mesh-glow"},null,-1)),n.value?(o(),l("div",ia,[e("div",da,[e("div",ca,[e("span",ua,t(s.$t("dashboard.home.greeting",{name:((F=j.email)==null?void 0:F.split("@")[0])||"User"})),1),e("div",ha,[e("div",pa,[a[21]||(a[21]=e("div",{class:"shine-effect"},null,-1)),p(u(gs),{size:14,class:"c-icon"}),e("span",null,t(((w=n.value.plan)==null?void 0:w.name)||s.$t("dashboard.home.noPlan")),1)]),u(le).enableDailyCheckin?(o(),l("div",{key:0,class:ee(["checkin-badge-new",{checked:(S=b.value)==null?void 0:S.checked_in_today}]),onClick:Qe},[a[22]||(a[22]=e("div",{class:"shine-effect"},null,-1)),p(u(q),{size:14,class:"c-icon"}),e("span",va,t((U=b.value)!=null&&U.checked_in_today?s.$t("dashboard.home.alreadyCheckin"):s.$t("dashboard.home.checkinNow")),1)],2)):C("",!0),ge.value?(o(),l("div",{key:1,class:"redeem-badge-new",onClick:a[5]||(a[5]=c=>ce.value=!0)},[a[23]||(a[23]=e("div",{class:"shine-effect"},null,-1)),p(u(fe),{size:14,class:"c-icon"}),e("span",_a,t(s.$t("dashboard.settings.redeemGiftCard")),1)])):C("",!0)])])]),e("div",ma,[e("div",fa,[e("div",ba,[p(u(q),{size:18,class:"text-accent-purple"}),e("span",ya,t(s.$t("dashboard.home.expireTime")),1)]),e("span",ga,t(Je.value),1),n.value.expired_at?(o(),l("div",ka,[e("span",wa,t(new Date(n.value.expired_at*1e3).toLocaleDateString()),1)])):C("",!0)]),e("div",Ca,[e("div",Sa,[p(u(ks),{size:18,class:"text-accent-blue"}),e("span",$a,t(s.$t("dashboard.home.resetTime")),1)]),e("span",Na,t(Ve.value),1),Ne.value?(o(),l("div",xa,[e("span",Da,t(Ne.value)+" | "+t(xe.value),1)])):(o(),l("div",Ra,[e("span",Ma,t(xe.value),1)]))]),e("div",za,[e("div",Ta,[p(u(ae),{size:18,class:"text-primary"}),e("span",Oa,t(s.$t("dashboard.home.remainingTraffic")),1)]),e("span",Ea,t($e(n.value.transfer_enable-(n.value.u+n.value.d))),1),e("div",Aa,[e("span",Ia,t(s.$t("dashboard.home.availableQuota")),1)])])])])):ne.value&&!n.value?(o(),l("div",Ba,[p(d,{active:"",paragraph:{rows:3}})])):(o(),l("div",La,[e("span",null,t(s.$t("dashboard.home.noDataAvailable")),1)]))]),e("div",Ua,[e("div",Ja,[p(u(Ie),{size:18}),e("h3",null,t(s.$t("dashboard.home.importantNotices")),1)]),A.value.length>0?(o(),l("div",Va,[(o(!0),l(T,null,K(A.value,c=>(o(),l("div",{class:"notice-item",key:c.id,onClick:i=>qe(c)},[a[25]||(a[25]=e("div",{class:"n-icon"},"ðŸ“Œ",-1)),e("div",qa,[e("span",Ha,t(c.title),1),e("span",Fa,t(new Date(c.created_at*1e3).toLocaleDateString()),1)]),p(u(ns),{size:16,class:"n-arrow"})],8,Pa))),128))])):(o(),l("div",Ka,[e("span",null,t(s.$t("dashboard.home.noNotices")),1)]))]),e("div",Ga,[e("div",ja,[e("div",Wa,[e("div",Qa,[e("h4",null,t(s.$t("dashboard.home.subscribeLink")),1),e("div",Xa,[e("input",{readonly:"",value:((J=n.value)==null?void 0:J.subscribe_url)||"https://link.example.com/...",class:"link-input"},null,8,Ya),e("button",{onClick:es,class:"copy-btn"},[p(u(ws),{size:16})])])]),e("div",Za,[e("h4",null,t(s.$t("dashboard.home.oneClickImport")),1),e("div",et,[e("div",{class:"import-item",onClick:a[6]||(a[6]=c=>H("clash"))},[...a[26]||(a[26]=[e("div",{class:"q-icon",title:"Clash"},[e("img",{src:xs,alt:"Clash"})],-1),e("span",null,"Clash",-1)])]),e("div",{class:"import-item",onClick:a[7]||(a[7]=c=>H("shadowrocket"))},[...a[27]||(a[27]=[e("div",{class:"q-icon",title:"Shadowrocket"},[e("img",{src:Ds,alt:"Shadowrocket"})],-1),e("span",null,"Shadowrocket",-1)])]),e("div",{class:"import-item",onClick:a[8]||(a[8]=c=>H("singbox"))},[...a[28]||(a[28]=[e("div",{class:"q-icon",title:"Singbox"},[e("img",{src:Rs,alt:"Singbox"})],-1),e("span",null,"Singbox",-1)])]),e("div",{class:"import-item",onClick:a[9]||(a[9]=c=>H("surfboard"))},[...a[29]||(a[29]=[e("div",{class:"q-icon",title:"Surfboard"},[e("img",{src:Ms,alt:"Surfboard"})],-1),e("span",null,"Surfboard",-1)])]),e("div",{class:"import-item",onClick:a[10]||(a[10]=c=>H("surge"))},[...a[30]||(a[30]=[e("div",{class:"q-icon",title:"Surge"},[e("img",{src:zs,alt:"Surge"})],-1),e("span",null,"Surge",-1)])]),e("div",{class:"import-item",onClick:a[11]||(a[11]=c=>H("quantumult-x"))},[...a[31]||(a[31]=[e("div",{class:"q-icon",title:"Quantumult X"},[e("img",{src:Ts,alt:"Quantumult X"})],-1),e("span",null,"Quantumult X",-1)])]),e("div",st,[p(u(Be),{value:((Y=n.value)==null?void 0:Y.subscribe_url)||"https://xboard.link/placeholder",size:88,color:(ye.value,"#1E293B"),"bg-color":ye.value?"#FFFFFF":"transparent",status:(Z=n.value)!=null&&Z.subscribe_url?"active":"loading"},null,8,["value","color","bg-color","status"]),e("p",null,t(s.$t("dashboard.home.scanToImport")),1)])])])]),e("div",at,[e("h4",null,t(s.$t("dashboard.home.clientDownload")),1),e("div",tt,[(o(!0),l(T,null,K(te.value,(c,i)=>(o(),l("div",{key:i,class:"platform-group"},[(o(!0),l(T,null,K(c.clients,r=>(o(),l("div",{key:r.name,class:"client-item-row"},[e("a",{href:r.url,target:"_blank",class:"download-link"},[e("img",{src:r.icon,alt:r.name},null,8,rt),e("div",lt,[e("span",nt,t(r.name),1),e("span",it,t(r.platform),1)])],8,ot),e("a",{onClick:m=>Ge(r),class:"doc-btn-small"},[p(v,{size:18}),e("span",null,t(s.$t("dashboard.home.usageDocs")),1)],8,dt)]))),128))]))),128))])])])])]),p(_,{open:W.value,"onUpdate:open":a[13]||(a[13]=c=>W.value=c),footer:null,width:650,class:"notice-modal",centered:""},{title:O(()=>{var c;return[e("div",ct,[e("div",ut,[p(u(Ie),{size:18})]),e("span",ht,t((c=N.value)==null?void 0:c.title),1)])]}),default:O(()=>{var c;return[a[32]||(a[32]=e("div",{class:"modal-mesh"},null,-1)),x.value?(o(),l("div",{key:0,class:ee(["promo-card-wrapper",x.value.theme||"default"])},[e("div",pt,[e("div",vt,[e("h2",{class:"promo-title",innerHTML:(c=x.value.title)==null?void 0:c.replace(/\\n/g,"<br>")},null,8,_t)]),e("div",mt,[e("p",ft,t(x.value.content),1),x.value.code?(o(),l("div",bt,[e("span",yt,t(s.$t("dashboard.home.recommendCode")),1),e("span",gt,t(x.value.code),1)])):C("",!0)]),x.value.btnText?(o(),l("div",kt,[e("button",{class:"promo-btn",onClick:a[12]||(a[12]=i=>He(x.value.btnRoute))},t(x.value.btnText),1)])):C("",!0)])],2)):(o(),l("div",{key:1,class:"notice-detail-content markdown-body",innerHTML:Pe.value},null,8,wt)),e("div",Ct,[e("div",St,[p(u(q),{size:12}),e("span",null,t(N.value?new Date(N.value.created_at*1e3).toLocaleString():""),1)])])]}),_:1},8,["open"]),p(_,{open:ie.value,"onUpdate:open":a[14]||(a[14]=c=>ie.value=c),footer:null,width:420,class:"checkin-modal",centered:""},{default:O(()=>{var c,i,r,m;return[e("div",$t,[e("div",Nt,[e("div",xt,[a[33]||(a[33]=e("div",{class:"ripple"},null,-1)),p(u(q),{size:48,class:"main-icon"})]),e("h2",Dt,t((c=b.value)!=null&&c.checked_in_today?s.$t("dashboard.home.checkinSuccess"):s.$t("dashboard.home.dailyCheckin")),1),e("p",Rt,t(s.$t("dashboard.home.checkinRulesDesc")),1)]),e("div",Mt,[e("div",zt,[e("span",Tt,t(((i=b.value)==null?void 0:i.streak_days)||0),1),e("span",Ot,t(s.$t("dashboard.home.consecutiveDays")),1)])]),b.value?(o(),l("div",Et,[(o(),l(T,null,K(7,y=>e("div",{key:y,class:ee(["streak-dot",{active:y<=(b.value.streak_days-1)%7+1,today:y===(b.value.streak_days-1)%7+1&&b.value.checked_in_today}])},[e("div",At,[y<(b.value.streak_days-1)%7+1||y===(b.value.streak_days-1)%7+1&&b.value.checked_in_today?(o(),$(u(Cs),{key:0,size:10})):(o(),l("span",It,t(y),1))])],2)),64))])):C("",!0),R.value?(o(),l("div",Bt,[a[34]||(a[34]=e("div",{class:"reward-glow"},null,-1)),e("div",Lt,[e("div",Ut,[R.value.type==="traffic"?(o(),$(u(ae),{key:0,size:28,class:"reward-icon traffic"})):(o(),$(u(q),{key:1,size:28,class:"reward-icon days"}))]),e("div",Jt,[e("div",Vt,[e("span",Pt,t(R.value.type==="traffic"?s.$t("dashboard.home.trafficReward"):s.$t("dashboard.home.dayReward")),1),((r=b.value)==null?void 0:r.streak_days)>1?(o(),l("span",qt,"STREAK BONUS")):C("",!0)]),e("span",Ht,"+"+t(R.value.value)+" "+t(R.value.unit),1)])])])):C("",!0),e("div",Ft,[p(k,{type:"primary",block:"",size:"large",class:"do-checkin-btn",loading:de.value,disabled:(m=b.value)==null?void 0:m.checked_in_today,onClick:Xe},{default:O(()=>{var y;return[P(t((y=b.value)!=null&&y.checked_in_today?s.$t("dashboard.home.alreadyCheckin"):s.$t("dashboard.home.checkinNow")),1)]}),_:1},8,["loading","disabled"])])])]}),_:1},8,["open"]),p(_,{open:ce.value,"onUpdate:open":a[19]||(a[19]=c=>ce.value=c),footer:null,width:460,class:"redeem-modal",centered:""},{default:O(()=>{var c;return[e("div",Kt,[e("div",Gt,[e("div",{class:ee(["tab-item",{active:I.value==="redeem"}]),onClick:a[15]||(a[15]=i=>I.value="redeem")},[p(u(fe),{size:16}),e("span",null,t(s.$t("dashboard.settings.redeem")),1)],2),E.value?(o(),l("div",{key:0,class:ee(["tab-item",{active:I.value==="history"}]),onClick:a[16]||(a[16]=i=>{I.value="history",Ze()})},[p(u($s),{size:16}),e("span",null,t(s.$t("dashboard.settings.history")),1)],2)):C("",!0)]),I.value==="redeem"?(o(),l("div",jt,[e("div",Wt,[e("div",Qt,[a[35]||(a[35]=e("div",{class:"ripple"},null,-1)),p(u(fe),{size:48,class:"main-icon"})]),z.value?(o(),l("h2",Yt,t(s.$t("dashboard.settings.redeemSuccess")),1)):(o(),l("h2",Xt,t(s.$t("dashboard.settings.redeemGiftCard")),1))]),z.value?(o(),l("div",to,[e("div",oo,[p(u(Ss),{size:20}),a[36]||(a[36]=e("span",null,"OK",-1))]),e("p",ro,t(s.$t("dashboard.settings.redeemSuccess")),1),e("div",lo,[(c=z.value)!=null&&c.rewards?(o(!0),l(T,{key:0},K(z.value.rewards,(i,r)=>(o(),l("div",{key:r,class:"reward-item-simple"},[i.type==="balance"?(o(),$(u(Ee),{key:0,size:16,class:"text-accent-blue"})):i.type==="traffic"?(o(),$(u(ae),{key:1,size:16,class:"text-accent-blue"})):i.type==="expire"?(o(),$(u(q),{key:2,size:16,class:"text-accent-blue"})):(o(),$(u(be),{key:3,size:16,class:"text-accent-blue"})),e("span",no,[i.type==="balance"?(o(),l(T,{key:0},[P("Â¥"+t(i.value/100),1)],64)):i.type==="traffic"?(o(),l(T,{key:1},[P(t($e(i.value)),1)],64)):i.type==="expire"?(o(),l(T,{key:2},[P(t(i.value)+t(s.$t("dashboard.home.daysLaterResetShort")),1)],64)):C("",!0),P(" "+t(i.label),1)])]))),128)):(o(),l("div",io,[p(u(ae),{size:16}),e("span",null,t(s.$t("dashboard.settings.redeemSuccess")),1)]))]),p(k,{block:"",type:"primary",onClick:a[18]||(a[18]=i=>{z.value=null,M.value=""}),class:"close-result-btn"},{default:O(()=>[P(t(s.$t("common.confirm")),1)]),_:1})])):(o(),l("div",Zt,[e("div",eo,[is(e("input",{"onUpdate:modelValue":a[17]||(a[17]=i=>M.value=i),type:"text",placeholder:s.$t("dashboard.settings.giftCardPlaceholder"),class:"redeem-input",disabled:Q.value,onKeyup:ds(De,["enter"])},null,40,so),[[cs,M.value]])]),e("div",ao,[p(k,{type:"primary",block:"",size:"large",class:"do-redeem-btn",loading:Q.value,disabled:!M.value,onClick:De},{default:O(()=>[P(t(Q.value?s.$t("dashboard.settings.redeeming"):s.$t("dashboard.settings.redeemBtn")),1)]),_:1},8,["loading","disabled"])])]))])):(o(),l("div",co,[ue.value?(o(),l("div",uo,[p(L)])):E.value?oe.value.length===0?(o(),l("div",po,[p(u(Ae),{size:40}),e("p",null,t(s.$t("dashboard.settings.noHistory")),1)])):(o(),l("div",vo,[(o(!0),l(T,null,K(oe.value,i=>(o(),l("div",{key:i.id,class:"history-item glass-card"},[e("div",_o,[i.template_type==="balance"?(o(),$(u(Ee),{key:0,size:18})):i.template_type==="traffic"?(o(),$(u(ae),{key:1,size:18})):i.template_type==="expire"?(o(),$(u(q),{key:2,size:18})):(o(),$(u(be),{key:3,size:18}))]),e("div",mo,[e("div",fo,[e("span",bo,t(i.template_name),1),e("span",yo,t(new Date(i.created_at*1e3).toLocaleDateString()),1)]),e("div",go,[e("span",ko,t(i.code),1)])])]))),128))])):(o(),l("div",ho,[p(u(Ae),{size:40}),e("p",null,t(s.$t("dashboard.settings.notSupported")),1)]))]))])]}),_:1},8,["open"]),p(_,{open:X.value,"onUpdate:open":a[20]||(a[20]=c=>X.value=c),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:O(()=>{var c;return[e("div",wo,[p(v,{size:20}),e("span",null,t((c=B.value)==null?void 0:c.title),1)])]}),default:O(()=>[he.value?(o(),l("div",Co,[p(L)])):(o(),l("div",{key:1,class:"modal-content markdown-body",innerHTML:je.value},null,8,So))]),_:1},8,["open"])])}}}),Vo=ss(No,[["__scopeId","data-v-7aa988c5"]]);export{Vo as default};
