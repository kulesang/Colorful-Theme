import{u as x,b as c,c as F,f as V,h as o,i as t,k as n,j as d,t as a,l as g,F as y,w as S,x as A,n as B,q as b,o as i,p as R,z as j}from"./index-DmLllGbO.js";import{u as q,v as W,w as E}from"./user-B2DJrFcZ.js";import{_ as G}from"./_plugin-vue_export-helper-BKqSRVk_.js";import{U as H}from"./users-DABSARjD.js";import{c as k}from"./createLucideIcon-DFrmIa5Z.js";import{W as J}from"./wallet-DE4r7HDg.js";import{P as K}from"./plus-6BSLCIvL.js";import{C as O}from"./copy-iVy3yJI_.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=k("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=k("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=k("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Z={class:"invitations-page"},ss={class:"page-header"},ts={class:"header-icon"},as={key:0,class:"loading-state"},es={class:"invite-stats-grid"},os={class:"stat-card glass-card"},is={class:"stat-icon commission-count"},ns={class:"stat-content"},cs={class:"stat-value"},ds={class:"stat-label"},rs={class:"stat-card glass-card"},ls={class:"stat-icon commission-earned"},vs={class:"stat-content"},us={class:"stat-value"},_s={class:"stat-label"},hs={class:"stat-card glass-card"},ms={class:"stat-icon commission-rate"},ps={class:"stat-content"},gs={class:"stat-value"},ys={class:"stat-label"},bs={class:"stat-card glass-card highlight"},ks={class:"stat-icon commission-balance"},fs={class:"stat-content"},$s={class:"stat-value"},Cs={class:"stat-label"},zs={class:"invite-link-card glass-card"},ws={class:"card-header"},Is={key:0,class:"link-box-wrapper"},Ds={class:"code-badge"},Fs=["value"],Ss=["onClick"],As={key:1,class:"empty-codes"},Ls={class:"link-desc"},Us={class:"invite-list-card glass-card"},Ms={class:"card-header"},Ns={class:"record-count"},Ps={class:"record-list"},Ts={key:0,class:"empty-records"},xs={class:"record-info"},Vs={class:"record-user"},Bs={class:"record-date"},Rs={key:0,class:"pagination-wrapper"},js={__name:"Invitations",setup(qs){const{t:f}=x(),v=c(null),$=c(!0),h=c(!1),u=F(()=>{var l;if(!((l=v.value)!=null&&l.stat))return{commission_count:0,earned_commission:0,pending_commission:0,commission_rate:0,commission_balance:0};const s=v.value.stat;return{commission_count:s[0]||0,earned_commission:s[1]||0,pending_commission:s[2]||0,commission_rate:s[3]||0,commission_balance:s[4]||0}}),C=F(()=>{var s;return((s=v.value)==null?void 0:s.codes)||[]}),m=c(1),_=c(0),z=c(10),r=c([]),w=async()=>{try{const s=await W({current:m.value,page_size:z.value});s.data&&Array.isArray(s.data)?(r.value=s.data,_.value=s.total||s.data.length):s.data&&s.data.data&&Array.isArray(s.data.data)?(r.value=s.data.data,_.value=s.data.total):r.value=[]}catch(s){console.error(s)}},I=s=>window.location.origin+"/#/register?code="+s,D=async()=>{try{const s=await q();s.data&&(v.value=s.data)}catch{b.error(f("common.copyFailed"))}finally{$.value=!1}};V(()=>{D(),w()});const L=async()=>{h.value=!0;try{(await E()).data&&(b.success(f("dashboard.invitations.generateSuccess")),D())}catch{}finally{h.value=!1}},U=s=>s?new Date(s*1e3).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"--",M=s=>{navigator.clipboard.writeText(s),b.success("邀请链接已复制")};return(s,l)=>{const N=g("a-spin"),P=g("a-button"),T=g("a-pagination");return i(),o("div",Z,[t("div",ss,[t("div",ts,[n(d(H),{size:32})]),t("h1",null,a(s.$t("dashboard.invitations.title")),1),t("p",null,a(s.$t("dashboard.invitations.description")),1)]),$.value?(i(),o("div",as,[n(N,{size:"large"})])):(i(),o(y,{key:1},[t("div",es,[t("div",os,[t("div",is,[n(d(Y),{size:24})]),t("div",ns,[t("div",cs,a(u.value.commission_count),1),t("div",ds,a(s.$t("dashboard.invitations.stats.count")),1)])]),t("div",rs,[t("div",ls,[n(d(Q),{size:24})]),t("div",vs,[t("div",us,"¥"+a((u.value.earned_commission/100).toFixed(2)),1),t("div",_s,a(s.$t("dashboard.invitations.stats.earned")),1)])]),t("div",hs,[t("div",ms,[n(d(X),{size:24})]),t("div",ps,[t("div",gs,a(u.value.commission_rate)+"%",1),t("div",ys,a(s.$t("dashboard.invitations.stats.rate")),1)])]),t("div",bs,[t("div",ks,[n(d(J),{size:24})]),t("div",fs,[t("div",$s,"¥"+a((u.value.commission_balance/100).toFixed(2)),1),t("div",Cs,a(s.$t("dashboard.invitations.stats.balance")),1)])])]),t("div",zs,[t("div",ws,[t("h3",null,a(s.$t("dashboard.invitations.linkTitle")),1),n(P,{type:"primary",class:"generate-btn",loading:h.value,onClick:L},{icon:S(()=>[n(d(K),{size:16})]),default:S(()=>[R(" "+a(s.$t("dashboard.invitations.generate")),1)]),_:1},8,["loading"])]),C.value.length>0?(i(),o("div",Is,[(i(!0),o(y,null,A(C.value,(e,p)=>(i(),o("div",{key:p,class:"link-box"},[t("div",Ds,a(e.code),1),t("input",{value:I(e.code),readonly:"",class:"link-input"},null,8,Fs),t("button",{class:"copy-btn",onClick:Ws=>M(I(e.code))},[n(d(O),{size:18}),t("span",null,a(s.$t("dashboard.invitations.copy")),1)],8,Ss)]))),128))])):(i(),o("div",As,[t("p",null,a(s.$t("dashboard.invitations.emptyCode")),1)])),t("p",Ls,a(s.$t("dashboard.invitations.desc")),1)]),t("div",Us,[t("div",Ms,[t("h3",null,a(s.$t("dashboard.invitations.recordTitle")),1),t("span",Ns,a(s.$t("dashboard.invitations.totalRecords",{count:r.value.length})),1)]),t("div",Ps,[r.value.length===0?(i(),o("div",Ts,a(s.$t("dashboard.invitations.noRecords")),1)):(i(!0),o(y,{key:1},A(r.value,(e,p)=>(i(),o("div",{key:p,class:"record-item"},[t("div",xs,[t("div",Vs,a(s.$t("dashboard.invitations.orderParams",{id:e.trade_no})),1),t("div",Bs,a(s.$t("dashboard.invitations.orderAmount"))+": ¥"+a((e.order_amount/100).toFixed(2))+" | "+a(U(e.created_at)),1)]),t("div",{class:j(["record-status",{confirmed:e.get_amount>0}])},a(e.get_amount>0?`+¥${(e.get_amount/100).toFixed(2)}`:s.$t("dashboard.invitations.statusPending")),3)]))),128))]),_.value>0?(i(),o("div",Rs,[n(T,{current:m.value,"onUpdate:current":l[0]||(l[0]=e=>m.value=e),total:_.value,pageSize:z.value,onChange:w,"show-less-items":""},null,8,["current","total","pageSize"])])):B("",!0)])],64))])}}},Ys=G(js,[["__scopeId","data-v-af98273b"]]);export{Ys as default};
