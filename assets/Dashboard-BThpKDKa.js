import{A as Le,u as Me,y as ss,c as b,b as f,e as as,f as ts,g as os,h as i,n as w,i as e,k as p,j as u,t,m as ls,z as oe,l as Z,F as R,x as Y,w as z,q as I,o,a as C,p as B,B as rs,C as ns,D as is}from"./index-CKe-fjM3.js";import{a as ds,g as cs,b as us,c as hs,d as Re,r as Oe,e as ps,f as vs,h as ms}from"./user-6sy0Iv0P.js";import{d as me}from"./marked.esm-DajSjiQI.js";import{_ as fs}from"./_plugin-vue_export-helper-Bi1xawgg.js";import{c as O}from"./createLucideIcon-DAorw_ar.js";import{C as Te}from"./clock-Dk6703SZ.js";import{A as _s}from"./activity-Dgvsy-uZ.js";import{C as L,a as bs}from"./chevron-right-CLyjIjo7.js";import{R as ys}from"./refresh-cw-DaUnROVl.js";import{Z as ee}from"./zap-52YwN4mq.js";import{C as gs}from"./copy-Cwu4CyCh.js";import{C as Ae}from"./credit-card-BleMzAkZ.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=O("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=O("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=O("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=O("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=O("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=O("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=O("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=O("zap-off",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),$s="/images/clients/Clash.webp",xs="/images/clients/Shadowrocket.webp",Ns="/images/clients/Singbox.svg",zs="/images/clients/Surfboard.svg",Ds="/images/clients/Surge.svg",Ms="/images/clients/Quantumult.webp",Rs={class:"dark-tech-dashboard"},Os={key:0,class:"status-alerts animate-fade-in"},Ts={key:0,class:"alert-banner info"},As={class:"alert-content"},Is={class:"alert-text"},Bs={class:"alert-title"},Ls={class:"alert-desc"},Ps={key:1,class:"alert-banner error"},Es={class:"alert-content"},Js={class:"alert-text"},qs={class:"alert-title"},Hs={class:"alert-desc"},Us={key:2,class:"alert-banner error"},Vs={class:"alert-content"},Fs={class:"alert-text"},js={class:"alert-title"},Gs={class:"alert-desc"},Ks={key:3,class:"alert-banner warning"},Ws={class:"alert-content"},Qs={class:"alert-text"},Xs={class:"alert-title"},Zs={class:"alert-desc"},Ys={key:4,class:"alert-banner warning"},ea={class:"alert-content"},sa={class:"alert-text"},aa={class:"alert-title"},ta={class:"alert-desc"},oa={class:"bento-grid"},la={class:"subscription-hero glass-card bento-item lg:col-span-8"},ra={key:0,class:"hero-content"},na={class:"user-meta"},ia={class:"user-titles"},da={class:"greeting"},ca={class:"user-info-row"},ua={class:"plan-tag"},ha={class:"c-text"},pa={class:"c-text"},va={class:"metric-grid"},ma={class:"metric-item glass-card"},fa={class:"m-header"},_a={class:"m-label"},ba={class:"m-value"},ya={key:0,class:"m-footer"},ga={class:"m-subtext"},ka={class:"metric-item glass-card"},wa={class:"m-header"},Ca={class:"m-label"},Sa={class:"m-value"},$a={key:0,class:"m-footer"},xa={class:"m-subtext"},Na={key:1,class:"m-footer"},za={class:"m-subtext"},Da={class:"metric-item glass-card highlight"},Ma={class:"m-header"},Ra={class:"m-label"},Oa={class:"m-value text-primary"},Ta={class:"m-footer"},Aa={class:"m-subtext"},Ia={key:1,class:"hero-skeleton-wrap"},Ba={key:2,class:"hero-empty-state"},La={class:"notification-wall glass-card bento-item lg:col-span-4"},Pa={class:"card-header"},Ea={key:0,class:"notice-list"},Ja=["onClick"],qa={class:"n-body"},Ha={class:"n-title"},Ua={class:"n-time"},Va={key:1,class:"notice-empty"},Fa={class:"subscribe-section glass-card bento-item lg:col-span-12"},ja={class:"sub-layout"},Ga={class:"sub-left"},Ka={class:"sub-section"},Wa={class:"link-input-group"},Qa=["value"],Xa={class:"sub-section"},Za={class:"quick-icons"},Ya={class:"qr-code-box"},et={class:"sub-right"},st={class:"client-downloads"},at=["href"],tt=["src","alt"],ot={class:"dl-info"},lt={class:"dl-name"},rt={class:"dl-platform"},nt=["onClick"],it={class:"modal-title-custom"},dt={class:"title-icon"},ct={class:"title-text"},ut={class:"promo-card"},ht={class:"promo-header"},pt=["innerHTML"],vt={class:"promo-body"},mt={class:"promo-desc"},ft={key:0,class:"promo-code-box"},_t={class:"code-label"},bt={class:"code-val"},yt={key:0,class:"promo-action"},gt=["innerHTML"],kt={class:"notice-detail-footer"},wt={class:"info-badge"},Ct={class:"checkin-modal-content"},St={class:"checkin-header"},$t={class:"checkin-icon-wrap"},xt={class:"checkin-title"},Nt={class:"checkin-subtitle"},zt={class:"checkin-stats"},Dt={class:"stat-card"},Mt={class:"stat-val"},Rt={class:"stat-lab"},Ot={key:0,class:"reward-box animate-bounce-in"},Tt={class:"reward-content"},At={class:"reward-info"},It={class:"reward-label"},Bt={class:"reward-value"},Lt={class:"checkin-actions"},Pt={class:"redeem-modal-content"},Et={class:"redeem-tabs"},Jt={key:0,class:"redeem-pane"},qt={class:"redeem-header"},Ht={class:"redeem-icon-wrap"},Ut={key:0,class:"redeem-title"},Vt={key:1,class:"redeem-title success"},Ft={key:0,class:"redeem-form-area"},jt={class:"redeem-input-section"},Gt=["placeholder","disabled"],Kt={class:"redeem-actions"},Wt={key:1,class:"redeem-result-area animate-in"},Qt={class:"result-badge"},Xt={class:"result-desc"},Zt={class:"reward-list-mini"},Yt={class:"reward-val"},eo={key:1,class:"reward-item-simple"},so={key:1,class:"history-pane"},ao={key:0,class:"history-loading"},to={key:1,class:"history-empty"},oo={key:2,class:"history-empty"},lo={key:3,class:"history-list"},ro={class:"h-icon"},no={class:"h-info"},io={class:"h-top"},co={class:"h-name"},uo={class:"h-time"},ho={class:"h-bottom"},po={class:"h-code"},vo={class:"modal-title"},mo={key:0,class:"doc-loading"},fo=["innerHTML"],_o={components:{AQrcode:Le}},bo=Object.assign(_o,{__name:"Dashboard",setup(yo){me.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const S=ls(),{t:h}=Me(),Pe=ss(),be=b(()=>Pe.theme==="dark"),le=os(),r=f(JSON.parse(localStorage.getItem("xboard_subscribe_info")||"null")),J=as(JSON.parse(localStorage.getItem("xboard_user_info")||'{"email":""}')),se=f({}),T=f(JSON.parse(localStorage.getItem("xboard_notices")||"[]")),y=f(null),q=f(!1),re=f(!1),$=f(null),ne=f(!1),ie=f(!1),x=f(null),de=f(!1),N=f(""),H=f(!1),A=f("redeem"),ae=f([]),ce=f(!1),D=f(!0),ye=f(!1),g=f(null),U=f(!1),ue=f(!1),P=f(null),ge=f(!1),{locale:Ee}=Me(),te=b(()=>!r.value||!r.value.plan_id),ke=b(()=>!r.value||!r.value.expired_at||r.value.expired_at===0?!1:r.value.expired_at<Date.now()/1e3),he=b(()=>{var s;return!((s=r.value)!=null&&s.expired_at)||r.value.expired_at===0?0:Math.ceil((r.value.expired_at-Date.now()/1e3)/(24*3600))}),we=b(()=>he.value>0&&he.value<=3),pe=b(()=>r.value?r.value.transfer_enable-(r.value.u+r.value.d)<=0:!1),Ce=b(()=>!r.value||pe.value?!1:r.value.transfer_enable-(r.value.u+r.value.d)<1024*1024*1024),Se=s=>{if(s===0)return"0 B";const a=1024,c=["B","KB","MB","GB","TB"],m=Math.floor(Math.log(s)/Math.log(a));return parseFloat((s/Math.pow(a,m)).toFixed(2))+" "+c[m]},Je=b(()=>{if(te.value)return h("dashboard.home.noPlan");if(!r.value||!r.value.expired_at)return h("dashboard.home.forever");const s=r.value.expired_at-Date.now()/1e3;return s<=0?h("dashboard.home.expired"):Math.ceil(s/(24*3600))+" "+h("dashboard.home.daysLaterResetShort")}),qe=b(()=>{if(te.value)return h("dashboard.home.noPlan");const s=r.value.reset_day;if(s!=null&&s!==0){const a=new Date,c=a.getDate(),m=new Date(a.getFullYear(),a.getMonth()+1,0).getDate();let v=0;return s>c?v=s-c:s===c?v=0:v=m-c+s,v+" "+h("dashboard.home.daysLaterResetShort")}return h("dashboard.home.forever")}),$e=b(()=>{if(!r.value||!r.value.plan_id)return"";const s=r.value.reset_day;return s!=null&&s!==0?h("dashboard.home.resetDayNumberedShort",{day:s}):""}),xe=b(()=>{if(!r.value||!r.value.plan)return h("dashboard.home.trafficNoReset");const s=r.value.plan.reset_traffic_method;return h(s===0?"dashboard.home.trafficNoReset":s===1?"dashboard.home.trafficResetMonthly":s===2?"dashboard.home.trafficResetYearly":"dashboard.home.trafficReset")}),k=b(()=>{var s;if(!((s=y.value)!=null&&s.content))return null;try{const a=y.value.content.trim();if(a.startsWith("{")&&a.endsWith("}")){const c=JSON.parse(a);if(c&&c.cardComponent)return c}}catch{}return null}),He=b(()=>{var s;if(!((s=y.value)!=null&&s.content)||k.value)return"";try{return me.parse(y.value.content)}catch(a){return console.error("Markdown parsing error:",a),y.value.content}}),Ue=s=>{y.value=s,q.value=!0},Ve=s=>{s&&(s.startsWith("http")?window.open(s,"_blank"):(S.push(s),q.value=!1))},Fe=()=>{if(ge.value||(ge.value=!0,!T.value||T.value.length===0))return;const s=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}"),a=T.value.find(c=>{if(s[c.id])return!1;if(c.tags){let m="";return typeof c.tags=="string"?m=c.tags:Array.isArray(c.tags)&&(m=c.tags.join(",")),m.includes("å¼¹çª—")||m.includes("popup")||m.includes("Popup")||m.includes("POPUP")}return!1});a&&setTimeout(()=>{y.value=a,q.value=!0,je(a.id)},500)},je=s=>{const a=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}");a[s]=Date.now(),localStorage.setItem("xboard_popup_notice_read",JSON.stringify(a))};ts(async()=>{r.value||(re.value=!0),await ve(),le.enableDailyCheckin&&await We(),Ze(),Fe(),re.value=!1;try{const s=localStorage.getItem("xboard_client_config");s&&(se.value=JSON.parse(s));const c=await(await fetch("/clientConfig.json")).json();c.downloads&&(se.value=c.downloads,localStorage.setItem("xboard_client_config",JSON.stringify(c.downloads)))}catch{se.value={windows_android:{title:"Windows / Android",clients:[{name:"Clash Verge",platform:"Windows",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Surfboard",platform:"Android",icon:"/images/clients/Surfboard.svg",url:"https://manual.getsurfboard.com/",tutorial_url:"",tutorial_id:""}]},macos_ios:{title:"macOS / iOS",clients:[{name:"Clash Verge",platform:"macOS",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Shadowrocket",platform:"iOS",icon:"/images/clients/Shadowrocket.webp",url:"https://apps.apple.com/app/shadowrocket/id932747118",tutorial_url:"",tutorial_id:""}]}}}});const Ge=async s=>{if(s.tutorial_url){window.open(s.tutorial_url,"_blank");return}if(s.tutorial_id){P.value=null,U.value=!0,ue.value=!0;try{const a=await ps({language:Ee.value==="zh-CN"?"zh-CN":"en"});if(a.data){let c=null;Object.keys(a.data).forEach(m=>{const v=a.data[m].find(M=>M.id==s.tutorial_id);v&&(c=v)}),c?P.value=c:(S.push({name:"Knowledge",query:{id:s.tutorial_id}}),U.value=!1)}}catch{S.push({name:"Knowledge",query:{id:s.tutorial_id}}),U.value=!1}finally{ue.value=!1}}else S.push("/knowledge")},Ke=b(()=>{var s;if(!((s=P.value)!=null&&s.body))return"";try{return me.parse(P.value.body)}catch{return P.value.body}}),ve=async()=>{try{const[s,a,c]=await Promise.all([ds(),cs(),us()]);s.data&&JSON.stringify(s.data)!==JSON.stringify(r.value)&&(r.value=s.data,localStorage.setItem("xboard_subscribe_info",JSON.stringify(s.data))),a.data&&JSON.stringify(a.data)!==JSON.stringify(J)&&(Object.assign(J,a.data),localStorage.setItem("xboard_user_info",JSON.stringify(a.data))),c.data&&JSON.stringify(c.data)!==JSON.stringify(T.value)&&(T.value=c.data,localStorage.setItem("xboard_notices",JSON.stringify(c.data)))}catch{}},We=async()=>{try{const s=await hs();s.data&&($.value=s.data,s.data.checked_in_today&&(s.data.reward_type==="traffic"?x.value={type:"traffic",value:s.data.reward_traffic,unit:"MB"}:s.data.reward_type==="days"&&(x.value={type:"days",value:s.data.reward_days,unit:h("dashboard.home.checkinDays")})))}catch(s){console.error("Fetch checkin status error:",s)}},Qe=()=>{ne.value=!0},Xe=async()=>{var s;if(!((s=$.value)!=null&&s.checked_in_today)){ie.value=!0;try{const a=await vs();a.data&&($.value={checked_in_today:!0,streak_days:a.data.streak_days,reward_type:a.data.reward_type,reward_traffic:a.data.reward_traffic,reward_days:a.data.reward_days},a.data.reward_type==="traffic"?x.value={type:"traffic",value:a.data.reward_traffic,unit:"MB"}:x.value={type:"days",value:a.data.reward_days,unit:h("dashboard.home.checkinDays")},I.success(h("dashboard.home.checkinSuccess")),await ve())}catch{}finally{ie.value=!1}}},Ze=async()=>{var c,m;let s=!1,a=!1;try{await Re({page:1,per_page:1},{hideError:!0}),s=!0,D.value=!0}catch(v){((c=v.response)==null?void 0:c.status)===404||v.code==="ERR_NETWORK"||!v.response?(s=!1,D.value=!1):(s=!0,D.value=!0)}try{await Oe({code:""},{hideError:!0}),a=!0}catch(v){((m=v.response)==null?void 0:m.status)===404||v.code==="ERR_NETWORK"||!v.response?a=!1:a=!0}ye.value=s||a},Ye=async()=>{var s;if(!(!D.value&&ae.value.length===0)){ce.value=!0;try{const a=await Re({page:1,per_page:20},{hideError:!0});a.data&&(ae.value=Array.isArray(a.data)?a.data:a.data.data||[],D.value=!0)}catch(a){(((s=a.response)==null?void 0:s.status)===404||a.code==="ERR_NETWORK"||!a.response)&&(D.value=!1,A.value==="history"&&(A.value="redeem"))}finally{ce.value=!1}}},Ne=async()=>{var v,M,V,F,j,G,K,W,Q,X,d;if(!N.value)return;const s=J.balance||0,a=((v=r.value)==null?void 0:v.transfer_enable)||0,c=((M=r.value)==null?void 0:M.expired_at)||0,m=((V=r.value)==null?void 0:V.plan_id)||null;H.value=!0;try{let l;try{console.log("[ç¤¼å“å¡] å°è¯•ä½¿ç”¨çŽ°ä»£API: /user/gift-card/redeem"),l=await ms({code:N.value},{hideError:!0}),console.log("[ç¤¼å“å¡] çŽ°ä»£APIæˆåŠŸ")}catch(n){if(((F=n.response)==null?void 0:F.status)===404)console.log("[ç¤¼å“å¡] çŽ°ä»£APIä¸å­˜åœ¨(404)ï¼Œå°è¯•ä¼ ç»ŸAPI: /user/redeemgiftcard"),l=await Oe({code:N.value,giftcard:N.value},{hideError:!0}),console.log("[ç¤¼å“å¡] ä¼ ç»ŸAPIæˆåŠŸ");else throw n}if(l.data){if(console.log("[ç¤¼å“å¡] APIè¿”å›žæ•°æ®:",JSON.stringify(l.data,null,2)),await ve(),l.data===!0){const n=[],_=(J.balance||0)-s;_>0&&n.push({type:"balance",value:_,label:h("dashboard.settings.rewards.balance")});const ze=(((j=r.value)==null?void 0:j.transfer_enable)||0)-a;ze>0&&n.push({type:"traffic",value:ze,label:h("dashboard.settings.rewards.traffic")});const De=(((G=r.value)==null?void 0:G.expired_at)||0)-c;De>0&&n.push({type:"expire",value:Math.ceil(De/86400),label:h("dashboard.settings.rewards.expire")}),((K=r.value)==null?void 0:K.plan_id)!==m&&n.push({type:"plan",label:h("dashboard.settings.rewards.plan")}),g.value=n.length>0?{rewards:n}:{success:!0}}else if(l.data.rewards&&typeof l.data.rewards=="object"&&!Array.isArray(l.data.rewards)){console.log("[ç¤¼å“å¡] æ£€æµ‹åˆ°XBoardçŽ°ä»£APIè¿”å›žæ ¼å¼ï¼ˆrewardsä¸ºå¯¹è±¡ï¼‰");const n=l.data.rewards,_=[];n.balance&&n.balance>0&&_.push({type:"balance",value:n.balance,label:h("dashboard.settings.rewards.balance")}),n.transfer_enable&&n.transfer_enable>0&&_.push({type:"traffic",value:n.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),n.expire_days&&n.expire_days>0&&_.push({type:"expire",value:n.expire_days,label:h("dashboard.settings.rewards.expire")}),n.device_limit&&n.device_limit>0&&_.push({type:"device",value:n.device_limit,label:"è®¾å¤‡æ•°é‡"}),n.plan_id&&_.push({type:"plan",value:l.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),g.value={...l.data,rewards:_}}else if(l.data.data){console.log("[ç¤¼å“å¡] æ£€æµ‹åˆ°XBoardçŽ°ä»£APIè¿”å›žæ ¼å¼");const n=l.data.data.rewards||{},_=[];n.balance&&n.balance>0&&_.push({type:"balance",value:n.balance,label:h("dashboard.settings.rewards.balance")}),n.transfer_enable&&n.transfer_enable>0&&_.push({type:"traffic",value:n.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),n.expire_days&&n.expire_days>0&&_.push({type:"expire",value:n.expire_days,label:h("dashboard.settings.rewards.expire")}),n.plan_id&&_.push({type:"plan",value:l.data.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),g.value={...l.data.data,rewards:_}}else g.value=l.data;console.log("[ç¤¼å“å¡] æœ€ç»ˆredeemRewardResult:",JSON.stringify(g.value,null,2)),I.success(h("dashboard.settings.redeemSuccess")),N.value=""}}catch(l){console.error("===== ç¤¼å“å¡å…‘æ¢é”™è¯¯è¯¦æƒ… ====="),console.error("é”™è¯¯å¯¹è±¡:",l),console.error("å“åº”çŠ¶æ€:",(W=l.response)==null?void 0:W.status),console.error("å“åº”æ•°æ®:",(Q=l.response)==null?void 0:Q.data),console.error("é”™è¯¯æ¶ˆæ¯:",l.message),console.error("============================");const n=(d=(X=l.response)==null?void 0:X.data)==null?void 0:d.message,_={"The gift card has already been used by this user":h("dashboard.settings.giftCardUsedByUser"),"The gift card does not exist":h("dashboard.settings.giftCardNotFound"),"The gift card is not yet valid":h("dashboard.settings.giftCardNotValid"),"The gift card has expired":h("dashboard.settings.giftCardExpired"),"The gift card usage limit has been reached":h("dashboard.settings.giftCardUsedUp"),"Not suitable gift card type":h("common.error")};_[n]?I.error(_[n]):I.error(n||h("common.error"))}finally{H.value=!1}},es=()=>{var s;(s=r.value)!=null&&s.subscribe_url&&(navigator.clipboard.writeText(r.value.subscribe_url),I.success(h("dashboard.home.copySuccess")))},E=s=>{var v;if(!((v=r.value)!=null&&v.subscribe_url)){I.warning(h("dashboard.home.linkNotReady"));return}const a=encodeURIComponent(r.value.subscribe_url),c=le.siteName,m={clash:`clash://install-config?url=${a}&name=${encodeURIComponent(c)}`,shadowrocket:`shadowrocket://add/sub://${btoa(r.value.subscribe_url)}?remarks=${encodeURIComponent(c)}`,"quantumult-x":`quantumult-x:///add-resource?remote-resource=%7B%22server_remote%22:%5B%22${a},tag=${encodeURIComponent(c)}%22%5D%7D`,singbox:`sing-box://import-remote-profile?url=${a}#${encodeURIComponent(c)}`,surfboard:`surfboard:///install-config?url=${a}`,surge:`surge:///install-config?url=${a}`};m[s]&&(window.location.href=m[s],I.success(h("dashboard.home.jumpingToClient")))};return(s,a)=>{var F,j,G,K,W,Q,X;const c=Z("a-skeleton"),m=Z("BookOpen"),v=Z("a-modal"),M=Z("a-button"),V=Z("a-spin");return o(),i("div",Rs,[te.value||ke.value||pe.value||we.value||Ce.value?(o(),i("div",Os,[te.value?(o(),i("div",Ts,[e("div",As,[p(u(_e),{size:20,class:"alert-icon"}),e("div",Is,[e("span",Bs,t(s.$t("dashboard.home.noSubscriptionTitle")),1),e("span",Ls,t(s.$t("dashboard.home.noSubscriptionDesc")),1)])]),e("button",{class:"alert-action",onClick:a[0]||(a[0]=d=>u(S).push("/plans"))},t(s.$t("dashboard.home.buyPlan")),1)])):ke.value?(o(),i("div",Ps,[e("div",Es,[p(u(Te),{size:20,class:"alert-icon"}),e("div",Js,[e("span",qs,t(s.$t("dashboard.home.planExpiredTitle")),1),e("span",Hs,t(s.$t("dashboard.home.planExpiredDesc")),1)])]),e("button",{class:"alert-action",onClick:a[1]||(a[1]=d=>u(S).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):pe.value?(o(),i("div",Us,[e("div",Vs,[p(u(Ss),{size:20,class:"alert-icon"}),e("div",Fs,[e("span",js,t(s.$t("dashboard.home.trafficOutTitle")),1),e("span",Gs,t(s.$t("dashboard.home.trafficOutDesc")),1)])]),e("button",{class:"alert-action",onClick:a[2]||(a[2]=d=>u(S).push("/plans"))},t(s.$t("dashboard.home.resetTraffic")),1)])):we.value?(o(),i("div",Ks,[e("div",Ws,[p(u(Te),{size:20,class:"alert-icon"}),e("div",Qs,[e("span",Xs,t(s.$t("dashboard.home.expiringSoonTitle")),1),e("span",Zs,t(s.$t("dashboard.home.expiringSoonDesc",{days:he.value})),1)])]),e("button",{class:"alert-action",onClick:a[3]||(a[3]=d=>u(S).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):Ce.value?(o(),i("div",Ys,[e("div",ea,[p(u(Cs),{size:20,class:"alert-icon"}),e("div",sa,[e("span",aa,t(s.$t("dashboard.home.trafficLowTitle")),1),e("span",ta,t(s.$t("dashboard.home.trafficLowDesc")),1)])]),e("button",{class:"alert-action",onClick:a[4]||(a[4]=d=>u(S).push("/plans"))},t(s.$t("dashboard.home.renewPlan")),1)])):w("",!0)])):w("",!0),e("div",oa,[e("div",la,[a[23]||(a[23]=e("div",{class:"mesh-glow"},null,-1)),r.value?(o(),i("div",ra,[e("div",na,[e("div",ia,[e("span",da,t(s.$t("dashboard.home.greeting",{name:((F=J.email)==null?void 0:F.split("@")[0])||"User"})),1),e("div",ca,[e("div",ua,[p(u(_s),{size:14}),e("span",null,t(((j=r.value.plan)==null?void 0:j.name)||s.$t("dashboard.home.noPlan")),1)]),u(le).enableDailyCheckin?(o(),i("div",{key:0,class:oe(["checkin-badge-new",{checked:(G=$.value)==null?void 0:G.checked_in_today}]),onClick:Qe},[a[21]||(a[21]=e("div",{class:"shine-effect"},null,-1)),p(u(L),{size:14,class:"c-icon"}),e("span",ha,t((K=$.value)!=null&&K.checked_in_today?s.$t("dashboard.home.alreadyCheckin"):s.$t("dashboard.home.checkinNow")),1)],2)):w("",!0),ye.value?(o(),i("div",{key:1,class:"redeem-badge-new",onClick:a[5]||(a[5]=d=>de.value=!0)},[a[22]||(a[22]=e("div",{class:"shine-effect"},null,-1)),p(u(fe),{size:14,class:"c-icon"}),e("span",pa,t(s.$t("dashboard.settings.redeemGiftCard")),1)])):w("",!0)])])]),e("div",va,[e("div",ma,[e("div",fa,[p(u(L),{size:18,class:"text-accent-purple"}),e("span",_a,t(s.$t("dashboard.home.expireTime")),1)]),e("span",ba,t(Je.value),1),r.value.expired_at?(o(),i("div",ya,[e("span",ga,t(new Date(r.value.expired_at*1e3).toLocaleDateString()),1)])):w("",!0)]),e("div",ka,[e("div",wa,[p(u(ys),{size:18,class:"text-accent-blue"}),e("span",Ca,t(s.$t("dashboard.home.resetTime")),1)]),e("span",Sa,t(qe.value),1),$e.value?(o(),i("div",$a,[e("span",xa,t($e.value)+" | "+t(xe.value),1)])):(o(),i("div",Na,[e("span",za,t(xe.value),1)]))]),e("div",Da,[e("div",Ma,[p(u(ee),{size:18,class:"text-primary"}),e("span",Ra,t(s.$t("dashboard.home.remainingTraffic")),1)]),e("span",Oa,t(Se(r.value.transfer_enable-(r.value.u+r.value.d))),1),e("div",Ta,[e("span",Aa,t(s.$t("dashboard.home.availableQuota")),1)])])])])):re.value&&!r.value?(o(),i("div",Ia,[p(c,{active:"",paragraph:{rows:3}})])):(o(),i("div",Ba,[e("span",null,t(s.$t("dashboard.home.noDataAvailable")),1)]))]),e("div",La,[e("div",Pa,[p(u(Be),{size:18}),e("h3",null,t(s.$t("dashboard.home.importantNotices")),1)]),T.value.length>0?(o(),i("div",Ea,[(o(!0),i(R,null,Y(T.value,d=>(o(),i("div",{class:"notice-item",key:d.id,onClick:l=>Ue(d)},[a[24]||(a[24]=e("div",{class:"n-icon"},"ðŸ“Œ",-1)),e("div",qa,[e("span",Ha,t(d.title),1),e("span",Ua,t(new Date(d.created_at*1e3).toLocaleDateString()),1)]),p(u(bs),{size:16,class:"n-arrow"})],8,Ja))),128))])):(o(),i("div",Va,[e("span",null,t(s.$t("dashboard.home.noNotices")),1)]))]),e("div",Fa,[e("div",ja,[e("div",Ga,[e("div",Ka,[e("h4",null,t(s.$t("dashboard.home.subscribeLink")),1),e("div",Wa,[e("input",{readonly:"",value:((W=r.value)==null?void 0:W.subscribe_url)||"https://link.example.com/...",class:"link-input"},null,8,Qa),e("button",{onClick:es,class:"copy-btn"},[p(u(gs),{size:16})])])]),e("div",Xa,[e("h4",null,t(s.$t("dashboard.home.oneClickImport")),1),e("div",Za,[e("div",{class:"import-item",onClick:a[6]||(a[6]=d=>E("clash"))},[...a[25]||(a[25]=[e("div",{class:"q-icon",title:"Clash"},[e("img",{src:$s,alt:"Clash"})],-1),e("span",null,"Clash",-1)])]),e("div",{class:"import-item",onClick:a[7]||(a[7]=d=>E("shadowrocket"))},[...a[26]||(a[26]=[e("div",{class:"q-icon",title:"Shadowrocket"},[e("img",{src:xs,alt:"Shadowrocket"})],-1),e("span",null,"Shadowrocket",-1)])]),e("div",{class:"import-item",onClick:a[8]||(a[8]=d=>E("singbox"))},[...a[27]||(a[27]=[e("div",{class:"q-icon",title:"Singbox"},[e("img",{src:Ns,alt:"Singbox"})],-1),e("span",null,"Singbox",-1)])]),e("div",{class:"import-item",onClick:a[9]||(a[9]=d=>E("surfboard"))},[...a[28]||(a[28]=[e("div",{class:"q-icon",title:"Surfboard"},[e("img",{src:zs,alt:"Surfboard"})],-1),e("span",null,"Surfboard",-1)])]),e("div",{class:"import-item",onClick:a[10]||(a[10]=d=>E("surge"))},[...a[29]||(a[29]=[e("div",{class:"q-icon",title:"Surge"},[e("img",{src:Ds,alt:"Surge"})],-1),e("span",null,"Surge",-1)])]),e("div",{class:"import-item",onClick:a[11]||(a[11]=d=>E("quantumult-x"))},[...a[30]||(a[30]=[e("div",{class:"q-icon",title:"Quantumult X"},[e("img",{src:Ms,alt:"Quantumult X"})],-1),e("span",null,"Quantumult X",-1)])]),e("div",Ya,[p(u(Le),{value:((Q=r.value)==null?void 0:Q.subscribe_url)||"https://xboard.link/placeholder",size:88,color:(be.value,"#1E293B"),"bg-color":be.value?"#FFFFFF":"transparent",status:(X=r.value)!=null&&X.subscribe_url?"active":"loading"},null,8,["value","color","bg-color","status"]),e("p",null,t(s.$t("dashboard.home.scanToImport")),1)])])])]),e("div",et,[e("h4",null,t(s.$t("dashboard.home.clientDownload")),1),e("div",st,[(o(!0),i(R,null,Y(se.value,(d,l)=>(o(),i("div",{key:l,class:"platform-group"},[(o(!0),i(R,null,Y(d.clients,n=>(o(),i("div",{key:n.name,class:"client-item-row"},[e("a",{href:n.url,target:"_blank",class:"download-link"},[e("img",{src:n.icon,alt:n.name},null,8,tt),e("div",ot,[e("span",lt,t(n.name),1),e("span",rt,t(n.platform),1)])],8,at),e("a",{onClick:_=>Ge(n),class:"doc-btn-small"},[p(m,{size:18}),e("span",null,t(s.$t("dashboard.home.usageDocs")),1)],8,nt)]))),128))]))),128))])])])])]),p(v,{open:q.value,"onUpdate:open":a[13]||(a[13]=d=>q.value=d),footer:null,width:650,class:"notice-modal",centered:""},{title:z(()=>{var d;return[e("div",it,[e("div",dt,[p(u(Be),{size:18})]),e("span",ct,t((d=y.value)==null?void 0:d.title),1)])]}),default:z(()=>{var d;return[a[31]||(a[31]=e("div",{class:"modal-mesh"},null,-1)),k.value?(o(),i("div",{key:0,class:oe(["promo-card-wrapper",k.value.theme||"default"])},[e("div",ut,[e("div",ht,[e("h2",{class:"promo-title",innerHTML:(d=k.value.title)==null?void 0:d.replace(/\\n/g,"<br>")},null,8,pt)]),e("div",vt,[e("p",mt,t(k.value.content),1),k.value.code?(o(),i("div",ft,[e("span",_t,t(s.$t("dashboard.home.recommendCode")),1),e("span",bt,t(k.value.code),1)])):w("",!0)]),k.value.btnText?(o(),i("div",yt,[e("button",{class:"promo-btn",onClick:a[12]||(a[12]=l=>Ve(k.value.btnRoute))},t(k.value.btnText),1)])):w("",!0)])],2)):(o(),i("div",{key:1,class:"notice-detail-content markdown-body",innerHTML:He.value},null,8,gt)),e("div",kt,[e("div",wt,[p(u(L),{size:12}),e("span",null,t(y.value?new Date(y.value.created_at*1e3).toLocaleString():""),1)])])]}),_:1},8,["open"]),p(v,{open:ne.value,"onUpdate:open":a[14]||(a[14]=d=>ne.value=d),footer:null,width:420,class:"checkin-modal",centered:""},{default:z(()=>{var d,l,n;return[e("div",Ct,[e("div",St,[e("div",$t,[a[32]||(a[32]=e("div",{class:"ripple"},null,-1)),p(u(L),{size:48,class:"main-icon"})]),e("h2",xt,t((d=$.value)!=null&&d.checked_in_today?s.$t("dashboard.home.checkinSuccess"):s.$t("dashboard.home.dailyCheckin")),1),e("p",Nt,t(s.$t("dashboard.home.checkinRulesDesc")),1)]),e("div",zt,[e("div",Dt,[e("span",Mt,t(((l=$.value)==null?void 0:l.streak_days)||0),1),e("span",Rt,t(s.$t("dashboard.home.consecutiveDays")),1)])]),x.value?(o(),i("div",Ot,[e("div",Tt,[x.value.type==="traffic"?(o(),C(u(ee),{key:0,size:24,class:"reward-icon traffic"})):(o(),C(u(L),{key:1,size:24,class:"reward-icon days"})),e("div",At,[e("span",It,t(x.value.type==="traffic"?s.$t("dashboard.home.trafficReward"):s.$t("dashboard.home.dayReward")),1),e("span",Bt,"+"+t(x.value.value)+" "+t(x.value.unit),1)])])])):w("",!0),e("div",Lt,[p(M,{type:"primary",block:"",size:"large",class:"do-checkin-btn",loading:ie.value,disabled:(n=$.value)==null?void 0:n.checked_in_today,onClick:Xe},{default:z(()=>{var _;return[B(t((_=$.value)!=null&&_.checked_in_today?s.$t("dashboard.home.alreadyCheckin"):s.$t("dashboard.home.checkinNow")),1)]}),_:1},8,["loading","disabled"])])])]}),_:1},8,["open"]),p(v,{open:de.value,"onUpdate:open":a[19]||(a[19]=d=>de.value=d),footer:null,width:460,class:"redeem-modal",centered:""},{default:z(()=>{var d;return[e("div",Pt,[e("div",Et,[e("div",{class:oe(["tab-item",{active:A.value==="redeem"}]),onClick:a[15]||(a[15]=l=>A.value="redeem")},[p(u(fe),{size:16}),e("span",null,t(s.$t("dashboard.settings.redeem")),1)],2),D.value?(o(),i("div",{key:0,class:oe(["tab-item",{active:A.value==="history"}]),onClick:a[16]||(a[16]=l=>{A.value="history",Ye()})},[p(u(ws),{size:16}),e("span",null,t(s.$t("dashboard.settings.history")),1)],2)):w("",!0)]),A.value==="redeem"?(o(),i("div",Jt,[e("div",qt,[e("div",Ht,[a[33]||(a[33]=e("div",{class:"ripple"},null,-1)),p(u(fe),{size:48,class:"main-icon"})]),g.value?(o(),i("h2",Vt,t(s.$t("dashboard.settings.redeemSuccess")),1)):(o(),i("h2",Ut,t(s.$t("dashboard.settings.redeemGiftCard")),1))]),g.value?(o(),i("div",Wt,[e("div",Qt,[p(u(ks),{size:20}),a[34]||(a[34]=e("span",null,"OK",-1))]),e("p",Xt,t(s.$t("dashboard.settings.redeemSuccess")),1),e("div",Zt,[(d=g.value)!=null&&d.rewards?(o(!0),i(R,{key:0},Y(g.value.rewards,(l,n)=>(o(),i("div",{key:n,class:"reward-item-simple"},[l.type==="balance"?(o(),C(u(Ae),{key:0,size:16,class:"text-accent-blue"})):l.type==="traffic"?(o(),C(u(ee),{key:1,size:16,class:"text-accent-blue"})):l.type==="expire"?(o(),C(u(L),{key:2,size:16,class:"text-accent-blue"})):(o(),C(u(_e),{key:3,size:16,class:"text-accent-blue"})),e("span",Yt,[l.type==="balance"?(o(),i(R,{key:0},[B("Â¥"+t(l.value/100),1)],64)):l.type==="traffic"?(o(),i(R,{key:1},[B(t(Se(l.value)),1)],64)):l.type==="expire"?(o(),i(R,{key:2},[B(t(l.value)+t(s.$t("dashboard.home.daysLaterResetShort")),1)],64)):w("",!0),B(" "+t(l.label),1)])]))),128)):(o(),i("div",eo,[p(u(ee),{size:16}),e("span",null,t(s.$t("dashboard.settings.redeemSuccess")),1)]))]),p(M,{block:"",type:"primary",onClick:a[18]||(a[18]=l=>{g.value=null,N.value=""}),class:"close-result-btn"},{default:z(()=>[B(t(s.$t("common.confirm")),1)]),_:1})])):(o(),i("div",Ft,[e("div",jt,[rs(e("input",{"onUpdate:modelValue":a[17]||(a[17]=l=>N.value=l),type:"text",placeholder:s.$t("dashboard.settings.giftCardPlaceholder"),class:"redeem-input",disabled:H.value,onKeyup:ns(Ne,["enter"])},null,40,Gt),[[is,N.value]])]),e("div",Kt,[p(M,{type:"primary",block:"",size:"large",class:"do-redeem-btn",loading:H.value,disabled:!N.value,onClick:Ne},{default:z(()=>[B(t(H.value?s.$t("dashboard.settings.redeeming"):s.$t("dashboard.settings.redeemBtn")),1)]),_:1},8,["loading","disabled"])])]))])):(o(),i("div",so,[ce.value?(o(),i("div",ao,[p(V)])):D.value?ae.value.length===0?(o(),i("div",oo,[p(u(Ie),{size:40}),e("p",null,t(s.$t("dashboard.settings.noHistory")),1)])):(o(),i("div",lo,[(o(!0),i(R,null,Y(ae.value,l=>(o(),i("div",{key:l.id,class:"history-item glass-card"},[e("div",ro,[l.template_type==="balance"?(o(),C(u(Ae),{key:0,size:18})):l.template_type==="traffic"?(o(),C(u(ee),{key:1,size:18})):l.template_type==="expire"?(o(),C(u(L),{key:2,size:18})):(o(),C(u(_e),{key:3,size:18}))]),e("div",no,[e("div",io,[e("span",co,t(l.template_name),1),e("span",uo,t(new Date(l.created_at*1e3).toLocaleDateString()),1)]),e("div",ho,[e("span",po,t(l.code),1)])])]))),128))])):(o(),i("div",to,[p(u(Ie),{size:40}),e("p",null,t(s.$t("dashboard.settings.notSupported")),1)]))]))])]}),_:1},8,["open"]),p(v,{open:U.value,"onUpdate:open":a[20]||(a[20]=d=>U.value=d),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:z(()=>{var d;return[e("div",vo,[p(m,{size:20}),e("span",null,t((d=P.value)==null?void 0:d.title),1)])]}),default:z(()=>[ue.value?(o(),i("div",mo,[p(V)])):(o(),i("div",{key:1,class:"modal-content markdown-body",innerHTML:Ke.value},null,8,fo))]),_:1},8,["open"])])}}}),Oo=fs(bo,[["__scopeId","data-v-0bef41ee"]]);export{Oo as default};
