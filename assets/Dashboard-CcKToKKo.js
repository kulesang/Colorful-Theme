import{A as Le,u as Me,y as aa,c as b,b as _,e as sa,f as ta,g as oa,h as i,n as S,i as e,k as p,j as u,t,m as ra,z as re,l as Y,F as O,x as Z,w as z,q as U,o,a as $,p as V,B as na,C as la,D as ia}from"./index-DmLllGbO.js";import{a as da,g as ca,b as ua,c as ha,d as ze,r as Te,e as pa,f as va,h as ma,i as fa}from"./user-B2DJrFcZ.js";import{d as fe}from"./marked.esm-DajSjiQI.js";import{_ as _a}from"./_plugin-vue_export-helper-BKqSRVk_.js";import{c as H}from"./createLucideIcon-DFrmIa5Z.js";import{C as Oe}from"./clock-B0T-8OlL.js";import{Z as ba}from"./zap-off-DogvweL8.js";import{A as ya}from"./activity-CiCJPkU0.js";import{C as P}from"./calendar--PC1rjl2.js";import{R as ga}from"./refresh-cw-Br5vEM28.js";import{Z as ee}from"./zap-D-6-dfXW.js";import{C as ka}from"./copy-iVy3yJI_.js";import{C as wa}from"./chevron-right-Bh6L6zBS.js";import{C as Ca}from"./circle-check-1tZHbUQl.js";import{C as Ae}from"./credit-card-C1MwWcB1.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=H("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=H("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=H("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=H("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=H("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]);/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=H("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Na="/images/clients/Clash.webp",xa="/images/clients/Shadowrocket.webp",Da="/images/clients/Singbox.svg",Ra="/images/clients/Surfboard.svg",Ma="/images/clients/Surge.svg",za="/images/clients/Quantumult.webp",Ta={class:"dark-tech-dashboard"},Oa={key:0,class:"status-alerts animate-fade-in"},Aa={key:0,class:"alert-banner info"},Ea={class:"alert-content"},Ia={class:"alert-text"},La={class:"alert-title"},Ba={class:"alert-desc"},Ja={key:1,class:"alert-banner error"},Ua={class:"alert-content"},Va={class:"alert-text"},Pa={class:"alert-title"},qa={class:"alert-desc"},Fa={key:2,class:"alert-banner error"},Ha={class:"alert-content"},Ka={class:"alert-text"},ja={class:"alert-title"},Ga={class:"alert-desc"},Wa={key:3,class:"alert-banner warning"},Qa={class:"alert-content"},Xa={class:"alert-text"},Ya={class:"alert-title"},Za={class:"alert-desc"},es={key:4,class:"alert-banner warning"},as={class:"alert-content"},ss={class:"alert-text"},ts={class:"alert-title"},os={class:"alert-desc"},rs={class:"bento-grid"},ns={class:"subscription-hero glass-card bento-item lg:col-span-8"},ls={key:0,class:"hero-content"},is={class:"user-meta"},ds={class:"user-titles"},cs={class:"greeting"},us={class:"user-info-row"},hs={class:"plan-tag"},ps={class:"c-text"},vs={class:"c-text"},ms={class:"metric-grid"},fs={class:"metric-item glass-card"},_s={class:"m-header"},bs={class:"m-label"},ys={class:"m-value"},gs={key:0,class:"m-footer"},ks={class:"m-subtext"},ws={class:"metric-item glass-card"},Cs={class:"m-header"},Ss={class:"m-label"},$s={class:"m-value"},Ns={key:0,class:"m-footer"},xs={class:"m-subtext"},Ds={key:1,class:"m-footer"},Rs={class:"m-subtext"},Ms={class:"metric-item glass-card highlight"},zs={class:"m-header"},Ts={class:"m-label"},Os={class:"m-value text-primary"},As={class:"m-footer"},Es={class:"m-subtext"},Is={key:1,class:"hero-skeleton-wrap"},Ls={key:2,class:"hero-empty-state"},Bs={class:"notification-wall glass-card bento-item lg:col-span-4"},Js={class:"card-header"},Us={key:0,class:"notice-list"},Vs=["onClick"],Ps={class:"n-body"},qs={class:"n-title"},Fs={class:"n-time"},Hs={key:1,class:"notice-empty"},Ks={class:"subscribe-section glass-card bento-item lg:col-span-12"},js={class:"sub-layout"},Gs={class:"sub-left"},Ws={class:"sub-section"},Qs={class:"link-input-group"},Xs=["value"],Ys={class:"sub-section"},Zs={class:"quick-icons"},et={class:"qr-code-box"},at={class:"sub-right"},st={class:"client-downloads"},tt=["href"],ot=["src","alt"],rt={class:"dl-info"},nt={class:"dl-name"},lt={class:"dl-platform"},it=["onClick"],dt={class:"modal-title-custom"},ct={class:"title-icon"},ut={class:"title-text"},ht={class:"promo-card"},pt={class:"promo-header"},vt=["innerHTML"],mt={class:"promo-body"},ft={class:"promo-desc"},_t={key:0,class:"promo-code-box"},bt={class:"code-label"},yt={class:"code-val"},gt={key:0,class:"promo-action"},kt=["innerHTML"],wt={class:"notice-detail-footer"},Ct={class:"info-badge"},St={class:"checkin-modal-content"},$t={class:"checkin-header"},Nt={class:"checkin-icon-wrap"},xt={class:"checkin-title"},Dt={class:"checkin-subtitle"},Rt={class:"checkin-stats"},Mt={class:"stat-card"},zt={class:"stat-val"},Tt={class:"stat-lab"},Ot={key:0,class:"reward-box animate-bounce-in"},At={class:"reward-content"},Et={class:"reward-info"},It={class:"reward-label"},Lt={class:"reward-value"},Bt={class:"checkin-actions"},Jt={class:"redeem-modal-content"},Ut={class:"redeem-tabs"},Vt={key:0,class:"redeem-pane"},Pt={class:"redeem-header"},qt={class:"redeem-icon-wrap"},Ft={key:0,class:"redeem-title"},Ht={key:1,class:"redeem-title success"},Kt={key:0,class:"redeem-form-area"},jt={class:"redeem-input-section"},Gt=["placeholder","disabled"],Wt={class:"redeem-actions"},Qt={key:1,class:"redeem-result-area animate-in"},Xt={class:"result-badge"},Yt={class:"result-desc"},Zt={class:"reward-list-mini"},eo={class:"reward-val"},ao={key:1,class:"reward-item-simple"},so={key:1,class:"history-pane"},to={key:0,class:"history-loading"},oo={key:1,class:"history-empty"},ro={key:2,class:"history-empty"},no={key:3,class:"history-list"},lo={class:"h-icon"},io={class:"h-info"},co={class:"h-top"},uo={class:"h-name"},ho={class:"h-time"},po={class:"h-bottom"},vo={class:"h-code"},mo={class:"modal-title"},fo={key:0,class:"doc-loading"},_o=["innerHTML"],bo={components:{AQrcode:Le}},yo=Object.assign(bo,{__name:"Dashboard",setup(go){fe.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const N=ra(),{t:h}=Me(),Be=aa(),ye=b(()=>Be.theme==="dark"),ne=oa(),n=_(JSON.parse(localStorage.getItem("xboard_subscribe_info")||"null")),K=sa(JSON.parse(localStorage.getItem("xboard_user_info")||'{"email":""}')),ae=_({}),A=_(JSON.parse(localStorage.getItem("xboard_notices")||"[]")),w=_(null),j=_(!1),le=_(!1),x=_(null),ie=_(!1),de=_(!1),D=_(null),ce=_(!1),R=_(""),G=_(!1),E=_("redeem"),se=_([]),ue=_(!1),T=_(!0),ge=_(!1),M=_(null),W=_(!1),he=_(!1),I=_(null),ke=_(!1),{locale:Je}=Me(),te=b(()=>!n.value||!n.value.plan_id),we=b(()=>!n.value||!n.value.expired_at||n.value.expired_at===0?!1:n.value.expired_at<Date.now()/1e3),pe=b(()=>{var a;return!((a=n.value)!=null&&a.expired_at)||n.value.expired_at===0?0:Math.ceil((n.value.expired_at-Date.now()/1e3)/(24*3600))}),Ce=b(()=>pe.value>0&&pe.value<=3),ve=b(()=>n.value?n.value.transfer_enable-(n.value.u+n.value.d)<=0:!1),Se=b(()=>!n.value||ve.value?!1:n.value.transfer_enable-(n.value.u+n.value.d)<1024*1024*1024),$e=a=>{if(a===0)return"0 B";const s=1024,d=["B","KB","MB","GB","TB"],v=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,v)).toFixed(2))+" "+d[v]},Ue=b(()=>{if(te.value)return h("dashboard.home.noPlan");if(!n.value||!n.value.expired_at)return h("dashboard.home.forever");const a=n.value.expired_at-Date.now()/1e3;return a<=0?h("dashboard.home.expired"):Math.ceil(a/(24*3600))+" "+h("dashboard.home.daysLaterResetShort")}),Ve=b(()=>{if(te.value)return h("dashboard.home.noPlan");let a=n.value.reset_day;if(a!=null&&a!==0){a=Number(a);const s=new Date,d=s.getFullYear(),v=s.getMonth(),m=(g,k,B)=>{const J=new Date(g,k+1,0).getDate();return new Date(g,k,Math.min(B,J))};let y=m(d,v,a);if(s>=y){let g=v+1,k=d;g>11&&(g=0,k++),y=m(k,g,a)}const L=y-s;return Math.ceil(L/(1e3*60*60*24))+" "+h("dashboard.home.daysLaterResetShort")}return h("dashboard.home.forever")}),Ne=b(()=>{if(!n.value||!n.value.plan_id)return"";const a=n.value.reset_day;return a!=null&&a!==0?h("dashboard.home.resetDayNumberedShort",{day:a}):""}),xe=b(()=>{if(!n.value||!n.value.plan)return h("dashboard.home.trafficNoReset");const a=n.value.plan.reset_traffic_method;return h(a===0?"dashboard.home.trafficNoReset":a===1?"dashboard.home.trafficResetMonthly":a===2?"dashboard.home.trafficResetYearly":"dashboard.home.trafficReset")}),C=b(()=>{var a;if(!((a=w.value)!=null&&a.content))return null;try{const s=w.value.content.trim();if(s.startsWith("{")&&s.endsWith("}")){const d=JSON.parse(s);if(d&&d.cardComponent)return d}}catch{}return null}),Pe=b(()=>{var a;if(!((a=w.value)!=null&&a.content)||C.value)return"";try{return fe.parse(w.value.content)}catch(s){return console.error("Markdown parsing error:",s),w.value.content}}),qe=a=>{w.value=a,j.value=!0},Fe=a=>{a&&(a.startsWith("http")?window.open(a,"_blank"):(N.push(a),j.value=!1))},He=()=>{if(ke.value||(ke.value=!0,!A.value||A.value.length===0))return;const a=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}"),s=A.value.find(d=>{if(a[d.id])return!1;if(d.tags){let v="";return typeof d.tags=="string"?v=d.tags:Array.isArray(d.tags)&&(v=d.tags.join(",")),v.includes("å¼¹çª—")||v.includes("popup")||v.includes("Popup")||v.includes("POPUP")}return!1});s&&setTimeout(()=>{w.value=s,j.value=!0,Ke(s.id)},500)},Ke=a=>{const s=JSON.parse(localStorage.getItem("xboard_popup_notice_read")||"{}");s[a]=Date.now(),localStorage.setItem("xboard_popup_notice_read",JSON.stringify(s))};ta(async()=>{n.value||(le.value=!0),await me(),ne.enableDailyCheckin&&await We(),Ye(),He(),le.value=!1;try{const a=localStorage.getItem("xboard_client_config");a&&(ae.value=JSON.parse(a));const d=await(await fetch("/clientConfig.json")).json();d.downloads&&(ae.value=d.downloads,localStorage.setItem("xboard_client_config",JSON.stringify(d.downloads)))}catch{ae.value={windows_android:{title:"Windows / Android",clients:[{name:"Clash Verge",platform:"Windows",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Surfboard",platform:"Android",icon:"/images/clients/Surfboard.svg",url:"https://manual.getsurfboard.com/",tutorial_url:"",tutorial_id:""}]},macos_ios:{title:"macOS / iOS",clients:[{name:"Clash Verge",platform:"macOS",icon:"/images/clients/Clash.webp",url:"https://clashverge.dev/",tutorial_url:"",tutorial_id:""},{name:"Shadowrocket",platform:"iOS",icon:"/images/clients/Shadowrocket.webp",url:"https://apps.apple.com/app/shadowrocket/id932747118",tutorial_url:"",tutorial_id:""}]}}}});const je=async a=>{if(a.tutorial_url){window.open(a.tutorial_url,"_blank");return}if(a.tutorial_id){I.value=null,W.value=!0,he.value=!0;try{const s=await pa({language:Je.value==="zh-CN"?"zh-CN":"en"});if(s.data){let d=null;if(Object.keys(s.data).forEach(v=>{const m=s.data[v].find(y=>y.id==a.tutorial_id);m&&(d=m)}),d){I.value=d;try{const v=await va({id:d.id});if(v.data){const m=v.data;I.value={...d,...m,body:m.body||m.content||d.body||d.content||""}}}catch(v){console.error("Fetch article detail failed:",v)}}else N.push({name:"Knowledge",query:{id:a.tutorial_id}}),W.value=!1}}catch{N.push({name:"Knowledge",query:{id:a.tutorial_id}}),W.value=!1}finally{he.value=!1}}else N.push("/knowledge")},Ge=b(()=>{var a;if(!((a=I.value)!=null&&a.body))return"";try{return fe.parse(I.value.body)}catch{return I.value.body}}),me=async()=>{try{const[a,s,d]=await Promise.all([da(),ca(),ua()]);a.data&&JSON.stringify(a.data)!==JSON.stringify(n.value)&&(n.value=a.data,localStorage.setItem("xboard_subscribe_info",JSON.stringify(a.data))),s.data&&JSON.stringify(s.data)!==JSON.stringify(K)&&(Object.assign(K,s.data),localStorage.setItem("xboard_user_info",JSON.stringify(s.data))),d.data&&JSON.stringify(d.data)!==JSON.stringify(A.value)&&(A.value=d.data,localStorage.setItem("xboard_notices",JSON.stringify(d.data)))}catch{}},We=async()=>{try{const a=await ha();a.data&&(x.value=a.data,a.data.checked_in_today&&(a.data.reward_type==="traffic"?D.value={type:"traffic",value:a.data.reward_traffic,unit:"MB"}:a.data.reward_type==="days"&&(D.value={type:"days",value:a.data.reward_days,unit:h("dashboard.home.checkinDays")})))}catch(a){console.error("Fetch checkin status error:",a)}},Qe=()=>{ie.value=!0},Xe=async()=>{var a;if(!((a=x.value)!=null&&a.checked_in_today)){de.value=!0;try{const s=await ma();s.data&&(x.value={checked_in_today:!0,streak_days:s.data.streak_days,reward_type:s.data.reward_type,reward_traffic:s.data.reward_traffic,reward_days:s.data.reward_days},s.data.reward_type==="traffic"?D.value={type:"traffic",value:s.data.reward_traffic,unit:"MB"}:D.value={type:"days",value:s.data.reward_days,unit:h("dashboard.home.checkinDays")},U.success(h("dashboard.home.checkinSuccess")),await me())}catch{}finally{de.value=!1}}},Ye=async()=>{var d,v;let a=!1,s=!1;try{await ze({page:1,per_page:1},{hideError:!0}),a=!0,T.value=!0}catch(m){((d=m.response)==null?void 0:d.status)===404||m.code==="ERR_NETWORK"||!m.response?(a=!1,T.value=!1):(a=!0,T.value=!0)}try{await Te({code:""},{hideError:!0}),s=!0}catch(m){((v=m.response)==null?void 0:v.status)===404||m.code==="ERR_NETWORK"||!m.response?s=!1:s=!0}ge.value=a||s},Ze=async()=>{var a;if(!(!T.value&&se.value.length===0)){ue.value=!0;try{const s=await ze({page:1,per_page:20},{hideError:!0});s.data&&(se.value=Array.isArray(s.data)?s.data:s.data.data||[],T.value=!0)}catch(s){(((a=s.response)==null?void 0:a.status)===404||s.code==="ERR_NETWORK"||!s.response)&&(T.value=!1,E.value==="history"&&(E.value="redeem"))}finally{ue.value=!1}}},De=async()=>{var m,y,L,F,g,k,B,J,Q,X,c;if(!R.value)return;const a=K.balance||0,s=((m=n.value)==null?void 0:m.transfer_enable)||0,d=((y=n.value)==null?void 0:y.expired_at)||0,v=((L=n.value)==null?void 0:L.plan_id)||null;G.value=!0;try{let l;try{l=await fa({code:R.value},{hideError:!0})}catch(r){const f=((F=r.response)==null?void 0:F.status)===404,oe=!r.response&&(r.code==="ERR_NETWORK"||r.message==="Network Error");if(f||oe)l=await Te({code:R.value,giftcard:R.value},{hideError:!0});else throw r}if(l.data){if(await me(),l.data===!0){const r=[],f=(K.balance||0)-a;f>0&&r.push({type:"balance",value:f,label:h("dashboard.settings.rewards.balance")});const oe=(((g=n.value)==null?void 0:g.transfer_enable)||0)-s;oe>0&&r.push({type:"traffic",value:oe,label:h("dashboard.settings.rewards.traffic")});const Re=(((k=n.value)==null?void 0:k.expired_at)||0)-d;Re>0&&r.push({type:"expire",value:Math.ceil(Re/86400),label:h("dashboard.settings.rewards.expire")}),((B=n.value)==null?void 0:B.plan_id)!==v&&r.push({type:"plan",label:h("dashboard.settings.rewards.plan")}),M.value=r.length>0?{rewards:r}:{success:!0}}else if(l.data.rewards&&typeof l.data.rewards=="object"&&!Array.isArray(l.data.rewards)){const r=l.data.rewards,f=[];r.balance&&r.balance>0&&f.push({type:"balance",value:r.balance,label:h("dashboard.settings.rewards.balance")}),r.transfer_enable&&r.transfer_enable>0&&f.push({type:"traffic",value:r.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),r.expire_days&&r.expire_days>0&&f.push({type:"expire",value:r.expire_days,label:h("dashboard.settings.rewards.expire")}),r.device_limit&&r.device_limit>0&&f.push({type:"device",value:r.device_limit,label:"è®¾å¤‡æ•°é‡"}),r.plan_id&&f.push({type:"plan",value:l.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),M.value={...l.data,rewards:f}}else if(l.data.data){console.log("[ç¤¼å“å¡] æ£€æµ‹åˆ°XBoardçŽ°ä»£APIè¿”å›žæ ¼å¼");const r=l.data.data.rewards||{},f=[];r.balance&&r.balance>0&&f.push({type:"balance",value:r.balance,label:h("dashboard.settings.rewards.balance")}),r.transfer_enable&&r.transfer_enable>0&&f.push({type:"traffic",value:r.transfer_enable,label:h("dashboard.settings.rewards.traffic")}),r.expire_days&&r.expire_days>0&&f.push({type:"expire",value:r.expire_days,label:h("dashboard.settings.rewards.expire")}),r.plan_id&&f.push({type:"plan",value:l.data.data.template_name||"è®¢é˜…å¥—é¤",label:h("dashboard.settings.rewards.plan")}),M.value={...l.data.data,rewards:f}}else M.value=l.data;U.success(h("dashboard.settings.redeemSuccess")),R.value=""}}catch(l){const r=((Q=(J=l.response)==null?void 0:J.data)==null?void 0:Q.message)||((c=(X=l.response)==null?void 0:X.data)==null?void 0:c.error),f={"The gift card has already been used by this user":h("dashboard.settings.giftCardUsedByUser"),"The gift card does not exist":h("dashboard.settings.giftCardNotFound"),"The gift card is not yet valid":h("dashboard.settings.giftCardNotValid"),"The gift card has expired":h("dashboard.settings.giftCardExpired"),"The gift card usage limit has been reached":h("dashboard.settings.giftCardUsedUp"),"Not suitable gift card type":"è¯¥ç¤¼å“å¡ç±»åž‹ä¸é€‚ç”¨äºŽæ‚¨å½“å‰çš„è®¢é˜…çŠ¶æ€","Unknown gift card type":"æœªçŸ¥çš„ç¤¼å“å¡ç±»åž‹"};f[r]?U.error(f[r]):U.error(r||h("common.error"))}finally{G.value=!1}},ea=()=>{var a;(a=n.value)!=null&&a.subscribe_url&&(navigator.clipboard.writeText(n.value.subscribe_url),U.success(h("dashboard.home.copySuccess")))},q=a=>{var m;if(!((m=n.value)!=null&&m.subscribe_url)){U.warning(h("dashboard.home.linkNotReady"));return}const s=encodeURIComponent(n.value.subscribe_url),d=ne.siteName,v={clash:`clash://install-config?url=${s}&name=${encodeURIComponent(d)}`,shadowrocket:`shadowrocket://add/sub://${btoa(n.value.subscribe_url)}?remarks=${encodeURIComponent(d)}`,"quantumult-x":`quantumult-x:///add-resource?remote-resource=%7B%22server_remote%22:%5B%22${s},tag=${encodeURIComponent(d)}%22%5D%7D`,singbox:`sing-box://import-remote-profile?url=${s}#${encodeURIComponent(d)}`,surfboard:`surfboard:///install-config?url=${s}`,surge:`surge:///install-config?url=${s}`};v[a]&&(window.location.href=v[a],U.success(h("dashboard.home.jumpingToClient")))};return(a,s)=>{var F,g,k,B,J,Q,X;const d=Y("a-skeleton"),v=Y("BookOpen"),m=Y("a-modal"),y=Y("a-button"),L=Y("a-spin");return o(),i("div",Ta,[te.value||we.value||ve.value||Ce.value||Se.value?(o(),i("div",Oa,[te.value?(o(),i("div",Aa,[e("div",Ea,[p(u(be),{size:20,class:"alert-icon"}),e("div",Ia,[e("span",La,t(a.$t("dashboard.home.noSubscriptionTitle")),1),e("span",Ba,t(a.$t("dashboard.home.noSubscriptionDesc")),1)])]),e("button",{class:"alert-action",onClick:s[0]||(s[0]=c=>u(N).push("/plans"))},t(a.$t("dashboard.home.buyPlan")),1)])):we.value?(o(),i("div",Ja,[e("div",Ua,[p(u(Oe),{size:20,class:"alert-icon"}),e("div",Va,[e("span",Pa,t(a.$t("dashboard.home.planExpiredTitle")),1),e("span",qa,t(a.$t("dashboard.home.planExpiredDesc")),1)])]),e("button",{class:"alert-action",onClick:s[1]||(s[1]=c=>u(N).push("/plans"))},t(a.$t("dashboard.home.renewPlan")),1)])):ve.value?(o(),i("div",Fa,[e("div",Ha,[p(u(ba),{size:20,class:"alert-icon"}),e("div",Ka,[e("span",ja,t(a.$t("dashboard.home.trafficOutTitle")),1),e("span",Ga,t(a.$t("dashboard.home.trafficOutDesc")),1)])]),e("button",{class:"alert-action",onClick:s[2]||(s[2]=c=>u(N).push("/plans"))},t(a.$t("dashboard.home.resetTraffic")),1)])):Ce.value?(o(),i("div",Wa,[e("div",Qa,[p(u(Oe),{size:20,class:"alert-icon"}),e("div",Xa,[e("span",Ya,t(a.$t("dashboard.home.expiringSoonTitle")),1),e("span",Za,t(a.$t("dashboard.home.expiringSoonDesc",{days:pe.value})),1)])]),e("button",{class:"alert-action",onClick:s[3]||(s[3]=c=>u(N).push("/plans"))},t(a.$t("dashboard.home.renewPlan")),1)])):Se.value?(o(),i("div",es,[e("div",as,[p(u($a),{size:20,class:"alert-icon"}),e("div",ss,[e("span",ts,t(a.$t("dashboard.home.trafficLowTitle")),1),e("span",os,t(a.$t("dashboard.home.trafficLowDesc")),1)])]),e("button",{class:"alert-action",onClick:s[4]||(s[4]=c=>u(N).push("/plans"))},t(a.$t("dashboard.home.renewPlan")),1)])):S("",!0)])):S("",!0),e("div",rs,[e("div",ns,[s[23]||(s[23]=e("div",{class:"mesh-glow"},null,-1)),n.value?(o(),i("div",ls,[e("div",is,[e("div",ds,[e("span",cs,t(a.$t("dashboard.home.greeting",{name:((F=K.email)==null?void 0:F.split("@")[0])||"User"})),1),e("div",us,[e("div",hs,[p(u(ya),{size:14}),e("span",null,t(((g=n.value.plan)==null?void 0:g.name)||a.$t("dashboard.home.noPlan")),1)]),u(ne).enableDailyCheckin?(o(),i("div",{key:0,class:re(["checkin-badge-new",{checked:(k=x.value)==null?void 0:k.checked_in_today}]),onClick:Qe},[s[21]||(s[21]=e("div",{class:"shine-effect"},null,-1)),p(u(P),{size:14,class:"c-icon"}),e("span",ps,t((B=x.value)!=null&&B.checked_in_today?a.$t("dashboard.home.alreadyCheckin"):a.$t("dashboard.home.checkinNow")),1)],2)):S("",!0),ge.value?(o(),i("div",{key:1,class:"redeem-badge-new",onClick:s[5]||(s[5]=c=>ce.value=!0)},[s[22]||(s[22]=e("div",{class:"shine-effect"},null,-1)),p(u(_e),{size:14,class:"c-icon"}),e("span",vs,t(a.$t("dashboard.settings.redeemGiftCard")),1)])):S("",!0)])])]),e("div",ms,[e("div",fs,[e("div",_s,[p(u(P),{size:18,class:"text-accent-purple"}),e("span",bs,t(a.$t("dashboard.home.expireTime")),1)]),e("span",ys,t(Ue.value),1),n.value.expired_at?(o(),i("div",gs,[e("span",ks,t(new Date(n.value.expired_at*1e3).toLocaleDateString()),1)])):S("",!0)]),e("div",ws,[e("div",Cs,[p(u(ga),{size:18,class:"text-accent-blue"}),e("span",Ss,t(a.$t("dashboard.home.resetTime")),1)]),e("span",$s,t(Ve.value),1),Ne.value?(o(),i("div",Ns,[e("span",xs,t(Ne.value)+" | "+t(xe.value),1)])):(o(),i("div",Ds,[e("span",Rs,t(xe.value),1)]))]),e("div",Ms,[e("div",zs,[p(u(ee),{size:18,class:"text-primary"}),e("span",Ts,t(a.$t("dashboard.home.remainingTraffic")),1)]),e("span",Os,t($e(n.value.transfer_enable-(n.value.u+n.value.d))),1),e("div",As,[e("span",Es,t(a.$t("dashboard.home.availableQuota")),1)])])])])):le.value&&!n.value?(o(),i("div",Is,[p(d,{active:"",paragraph:{rows:3}})])):(o(),i("div",Ls,[e("span",null,t(a.$t("dashboard.home.noDataAvailable")),1)]))]),e("div",Bs,[e("div",Js,[p(u(Ie),{size:18}),e("h3",null,t(a.$t("dashboard.home.importantNotices")),1)]),A.value.length>0?(o(),i("div",Us,[(o(!0),i(O,null,Z(A.value,c=>(o(),i("div",{class:"notice-item",key:c.id,onClick:l=>qe(c)},[s[24]||(s[24]=e("div",{class:"n-icon"},"ðŸ“Œ",-1)),e("div",Ps,[e("span",qs,t(c.title),1),e("span",Fs,t(new Date(c.created_at*1e3).toLocaleDateString()),1)]),p(u(wa),{size:16,class:"n-arrow"})],8,Vs))),128))])):(o(),i("div",Hs,[e("span",null,t(a.$t("dashboard.home.noNotices")),1)]))]),e("div",Ks,[e("div",js,[e("div",Gs,[e("div",Ws,[e("h4",null,t(a.$t("dashboard.home.subscribeLink")),1),e("div",Qs,[e("input",{readonly:"",value:((J=n.value)==null?void 0:J.subscribe_url)||"https://link.example.com/...",class:"link-input"},null,8,Xs),e("button",{onClick:ea,class:"copy-btn"},[p(u(ka),{size:16})])])]),e("div",Ys,[e("h4",null,t(a.$t("dashboard.home.oneClickImport")),1),e("div",Zs,[e("div",{class:"import-item",onClick:s[6]||(s[6]=c=>q("clash"))},[...s[25]||(s[25]=[e("div",{class:"q-icon",title:"Clash"},[e("img",{src:Na,alt:"Clash"})],-1),e("span",null,"Clash",-1)])]),e("div",{class:"import-item",onClick:s[7]||(s[7]=c=>q("shadowrocket"))},[...s[26]||(s[26]=[e("div",{class:"q-icon",title:"Shadowrocket"},[e("img",{src:xa,alt:"Shadowrocket"})],-1),e("span",null,"Shadowrocket",-1)])]),e("div",{class:"import-item",onClick:s[8]||(s[8]=c=>q("singbox"))},[...s[27]||(s[27]=[e("div",{class:"q-icon",title:"Singbox"},[e("img",{src:Da,alt:"Singbox"})],-1),e("span",null,"Singbox",-1)])]),e("div",{class:"import-item",onClick:s[9]||(s[9]=c=>q("surfboard"))},[...s[28]||(s[28]=[e("div",{class:"q-icon",title:"Surfboard"},[e("img",{src:Ra,alt:"Surfboard"})],-1),e("span",null,"Surfboard",-1)])]),e("div",{class:"import-item",onClick:s[10]||(s[10]=c=>q("surge"))},[...s[29]||(s[29]=[e("div",{class:"q-icon",title:"Surge"},[e("img",{src:Ma,alt:"Surge"})],-1),e("span",null,"Surge",-1)])]),e("div",{class:"import-item",onClick:s[11]||(s[11]=c=>q("quantumult-x"))},[...s[30]||(s[30]=[e("div",{class:"q-icon",title:"Quantumult X"},[e("img",{src:za,alt:"Quantumult X"})],-1),e("span",null,"Quantumult X",-1)])]),e("div",et,[p(u(Le),{value:((Q=n.value)==null?void 0:Q.subscribe_url)||"https://xboard.link/placeholder",size:88,color:(ye.value,"#1E293B"),"bg-color":ye.value?"#FFFFFF":"transparent",status:(X=n.value)!=null&&X.subscribe_url?"active":"loading"},null,8,["value","color","bg-color","status"]),e("p",null,t(a.$t("dashboard.home.scanToImport")),1)])])])]),e("div",at,[e("h4",null,t(a.$t("dashboard.home.clientDownload")),1),e("div",st,[(o(!0),i(O,null,Z(ae.value,(c,l)=>(o(),i("div",{key:l,class:"platform-group"},[(o(!0),i(O,null,Z(c.clients,r=>(o(),i("div",{key:r.name,class:"client-item-row"},[e("a",{href:r.url,target:"_blank",class:"download-link"},[e("img",{src:r.icon,alt:r.name},null,8,ot),e("div",rt,[e("span",nt,t(r.name),1),e("span",lt,t(r.platform),1)])],8,tt),e("a",{onClick:f=>je(r),class:"doc-btn-small"},[p(v,{size:18}),e("span",null,t(a.$t("dashboard.home.usageDocs")),1)],8,it)]))),128))]))),128))])])])])]),p(m,{open:j.value,"onUpdate:open":s[13]||(s[13]=c=>j.value=c),footer:null,width:650,class:"notice-modal",centered:""},{title:z(()=>{var c;return[e("div",dt,[e("div",ct,[p(u(Ie),{size:18})]),e("span",ut,t((c=w.value)==null?void 0:c.title),1)])]}),default:z(()=>{var c;return[s[31]||(s[31]=e("div",{class:"modal-mesh"},null,-1)),C.value?(o(),i("div",{key:0,class:re(["promo-card-wrapper",C.value.theme||"default"])},[e("div",ht,[e("div",pt,[e("h2",{class:"promo-title",innerHTML:(c=C.value.title)==null?void 0:c.replace(/\\n/g,"<br>")},null,8,vt)]),e("div",mt,[e("p",ft,t(C.value.content),1),C.value.code?(o(),i("div",_t,[e("span",bt,t(a.$t("dashboard.home.recommendCode")),1),e("span",yt,t(C.value.code),1)])):S("",!0)]),C.value.btnText?(o(),i("div",gt,[e("button",{class:"promo-btn",onClick:s[12]||(s[12]=l=>Fe(C.value.btnRoute))},t(C.value.btnText),1)])):S("",!0)])],2)):(o(),i("div",{key:1,class:"notice-detail-content markdown-body",innerHTML:Pe.value},null,8,kt)),e("div",wt,[e("div",Ct,[p(u(P),{size:12}),e("span",null,t(w.value?new Date(w.value.created_at*1e3).toLocaleString():""),1)])])]}),_:1},8,["open"]),p(m,{open:ie.value,"onUpdate:open":s[14]||(s[14]=c=>ie.value=c),footer:null,width:420,class:"checkin-modal",centered:""},{default:z(()=>{var c,l,r;return[e("div",St,[e("div",$t,[e("div",Nt,[s[32]||(s[32]=e("div",{class:"ripple"},null,-1)),p(u(P),{size:48,class:"main-icon"})]),e("h2",xt,t((c=x.value)!=null&&c.checked_in_today?a.$t("dashboard.home.checkinSuccess"):a.$t("dashboard.home.dailyCheckin")),1),e("p",Dt,t(a.$t("dashboard.home.checkinRulesDesc")),1)]),e("div",Rt,[e("div",Mt,[e("span",zt,t(((l=x.value)==null?void 0:l.streak_days)||0),1),e("span",Tt,t(a.$t("dashboard.home.consecutiveDays")),1)])]),D.value?(o(),i("div",Ot,[e("div",At,[D.value.type==="traffic"?(o(),$(u(ee),{key:0,size:24,class:"reward-icon traffic"})):(o(),$(u(P),{key:1,size:24,class:"reward-icon days"})),e("div",Et,[e("span",It,t(D.value.type==="traffic"?a.$t("dashboard.home.trafficReward"):a.$t("dashboard.home.dayReward")),1),e("span",Lt,"+"+t(D.value.value)+" "+t(D.value.unit),1)])])])):S("",!0),e("div",Bt,[p(y,{type:"primary",block:"",size:"large",class:"do-checkin-btn",loading:de.value,disabled:(r=x.value)==null?void 0:r.checked_in_today,onClick:Xe},{default:z(()=>{var f;return[V(t((f=x.value)!=null&&f.checked_in_today?a.$t("dashboard.home.alreadyCheckin"):a.$t("dashboard.home.checkinNow")),1)]}),_:1},8,["loading","disabled"])])])]}),_:1},8,["open"]),p(m,{open:ce.value,"onUpdate:open":s[19]||(s[19]=c=>ce.value=c),footer:null,width:460,class:"redeem-modal",centered:""},{default:z(()=>{var c;return[e("div",Jt,[e("div",Ut,[e("div",{class:re(["tab-item",{active:E.value==="redeem"}]),onClick:s[15]||(s[15]=l=>E.value="redeem")},[p(u(_e),{size:16}),e("span",null,t(a.$t("dashboard.settings.redeem")),1)],2),T.value?(o(),i("div",{key:0,class:re(["tab-item",{active:E.value==="history"}]),onClick:s[16]||(s[16]=l=>{E.value="history",Ze()})},[p(u(Sa),{size:16}),e("span",null,t(a.$t("dashboard.settings.history")),1)],2)):S("",!0)]),E.value==="redeem"?(o(),i("div",Vt,[e("div",Pt,[e("div",qt,[s[33]||(s[33]=e("div",{class:"ripple"},null,-1)),p(u(_e),{size:48,class:"main-icon"})]),M.value?(o(),i("h2",Ht,t(a.$t("dashboard.settings.redeemSuccess")),1)):(o(),i("h2",Ft,t(a.$t("dashboard.settings.redeemGiftCard")),1))]),M.value?(o(),i("div",Qt,[e("div",Xt,[p(u(Ca),{size:20}),s[34]||(s[34]=e("span",null,"OK",-1))]),e("p",Yt,t(a.$t("dashboard.settings.redeemSuccess")),1),e("div",Zt,[(c=M.value)!=null&&c.rewards?(o(!0),i(O,{key:0},Z(M.value.rewards,(l,r)=>(o(),i("div",{key:r,class:"reward-item-simple"},[l.type==="balance"?(o(),$(u(Ae),{key:0,size:16,class:"text-accent-blue"})):l.type==="traffic"?(o(),$(u(ee),{key:1,size:16,class:"text-accent-blue"})):l.type==="expire"?(o(),$(u(P),{key:2,size:16,class:"text-accent-blue"})):(o(),$(u(be),{key:3,size:16,class:"text-accent-blue"})),e("span",eo,[l.type==="balance"?(o(),i(O,{key:0},[V("Â¥"+t(l.value/100),1)],64)):l.type==="traffic"?(o(),i(O,{key:1},[V(t($e(l.value)),1)],64)):l.type==="expire"?(o(),i(O,{key:2},[V(t(l.value)+t(a.$t("dashboard.home.daysLaterResetShort")),1)],64)):S("",!0),V(" "+t(l.label),1)])]))),128)):(o(),i("div",ao,[p(u(ee),{size:16}),e("span",null,t(a.$t("dashboard.settings.redeemSuccess")),1)]))]),p(y,{block:"",type:"primary",onClick:s[18]||(s[18]=l=>{M.value=null,R.value=""}),class:"close-result-btn"},{default:z(()=>[V(t(a.$t("common.confirm")),1)]),_:1})])):(o(),i("div",Kt,[e("div",jt,[na(e("input",{"onUpdate:modelValue":s[17]||(s[17]=l=>R.value=l),type:"text",placeholder:a.$t("dashboard.settings.giftCardPlaceholder"),class:"redeem-input",disabled:G.value,onKeyup:la(De,["enter"])},null,40,Gt),[[ia,R.value]])]),e("div",Wt,[p(y,{type:"primary",block:"",size:"large",class:"do-redeem-btn",loading:G.value,disabled:!R.value,onClick:De},{default:z(()=>[V(t(G.value?a.$t("dashboard.settings.redeeming"):a.$t("dashboard.settings.redeemBtn")),1)]),_:1},8,["loading","disabled"])])]))])):(o(),i("div",so,[ue.value?(o(),i("div",to,[p(L)])):T.value?se.value.length===0?(o(),i("div",ro,[p(u(Ee),{size:40}),e("p",null,t(a.$t("dashboard.settings.noHistory")),1)])):(o(),i("div",no,[(o(!0),i(O,null,Z(se.value,l=>(o(),i("div",{key:l.id,class:"history-item glass-card"},[e("div",lo,[l.template_type==="balance"?(o(),$(u(Ae),{key:0,size:18})):l.template_type==="traffic"?(o(),$(u(ee),{key:1,size:18})):l.template_type==="expire"?(o(),$(u(P),{key:2,size:18})):(o(),$(u(be),{key:3,size:18}))]),e("div",io,[e("div",co,[e("span",uo,t(l.template_name),1),e("span",ho,t(new Date(l.created_at*1e3).toLocaleDateString()),1)]),e("div",po,[e("span",vo,t(l.code),1)])])]))),128))])):(o(),i("div",oo,[p(u(Ee),{size:40}),e("p",null,t(a.$t("dashboard.settings.notSupported")),1)]))]))])]}),_:1},8,["open"]),p(m,{open:W.value,"onUpdate:open":s[20]||(s[20]=c=>W.value=c),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:z(()=>{var c;return[e("div",mo,[p(v,{size:20}),e("span",null,t((c=I.value)==null?void 0:c.title),1)])]}),default:z(()=>[he.value?(o(),i("div",fo,[p(L)])):(o(),i("div",{key:1,class:"modal-content markdown-body",innerHTML:Ge.value},null,8,_o))]),_:1},8,["open"])])}}}),Io=_a(yo,[["__scopeId","data-v-4c6ee059"]]);export{Io as default};
