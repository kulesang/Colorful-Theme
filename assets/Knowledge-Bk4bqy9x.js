import{u as B,r as v,n as f,o as D,c as o,b as t,k as i,e as d,d as c,t as n,F as V,x,f as k,w,i as r,l as A}from"./index-K3BHgUgf.js";import{q as F}from"./user-zboQRicx.js";import{d as y,C as M,a as T}from"./marked.esm-CdqiJ-t6.js";import{_ as $}from"./_plugin-vue_export-helper-CwKUxaPK.js";import{B as b}from"./book-open-BiT5HuaG.js";import{F as E}from"./file-text-DMXVhrew.js";import"./createLucideIcon-6IQhkzLg.js";const I={class:"knowledge-page"},K={class:"page-header"},O={class:"header-icon"},S={key:0,class:"knowledge-grid"},H=["onClick"],U={class:"card-icon"},j={class:"card-content"},q={class:"card-title"},R={key:0,class:"card-desc"},G={class:"card-meta"},J={class:"meta-item"},P={key:0,class:"category-tag"},Q={class:"card-arrow"},W={key:1,class:"loading-state"},X={key:2,class:"empty-state"},Y={class:"modal-title"},Z=["innerHTML"],ee={__name:"Knowledge",setup(te){const{locale:m}=B();y.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const u=v({}),_=v(!0),p=v(!1),l=v(null),g=f(()=>{const e=[];return Object.keys(u.value).forEach(a=>{Array.isArray(u.value[a])&&u.value[a].forEach(h=>{e.push({...h,category:a})})}),e});D(async()=>{try{const e=await F({language:m.value==="zh-CN"?"zh-CN":"en"});e.data&&(u.value=e.data)}catch{}finally{_.value=!1}});const C=e=>e?new Date(e*1e3).toLocaleDateString(m.value==="zh-CN"?"zh-CN":"en-US"):"--",z=f(()=>{var e;if(!((e=l.value)!=null&&e.body))return"";try{return y.parse(l.value.body)}catch(a){return console.error("Markdown parsing error:",a),l.value.body}}),N=e=>{l.value=e,p.value=!0};return(e,a)=>{const h=k("a-spin"),L=k("a-modal");return r(),o("div",I,[t("div",K,[t("div",O,[d(c(b),{size:32})]),t("h1",null,n(e.$t("dashboard.knowledge.title")),1),t("p",null,n(e.$t("dashboard.knowledge.description")),1)]),_.value?i("",!0):(r(),o("div",S,[(r(!0),o(V,null,x(g.value,s=>(r(),o("div",{key:s.id,class:"knowledge-card glass-card",onClick:se=>N(s)},[t("div",U,[d(c(E),{size:24})]),t("div",j,[t("h3",q,n(s.title),1),s.description?(r(),o("p",R,n(s.description),1)):i("",!0),t("div",G,[t("span",J,[d(c(M),{size:14}),A(" "+n(C(s.updated_at||s.created_at)),1)]),s.category?(r(),o("span",P,n(s.category),1)):i("",!0)])]),t("div",Q,[d(c(T),{size:20})])],8,H))),128))])),_.value?(r(),o("div",W,[d(h,{size:"large"})])):i("",!0),!_.value&&g.value.length===0?(r(),o("div",X,[a[1]||(a[1]=t("div",{class:"empty-icon"},"ðŸ“š",-1)),t("p",null,n(e.$t("dashboard.knowledge.noContent")),1)])):i("",!0),d(L,{visible:p.value,"onUpdate:visible":a[0]||(a[0]=s=>p.value=s),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:w(()=>{var s;return[t("div",Y,[d(c(b),{size:20}),t("span",null,n((s=l.value)==null?void 0:s.title),1)])]}),default:w(()=>[t("div",{class:"modal-content markdown-body",innerHTML:z.value},null,8,Z)]),_:1},8,["visible"])])}}},ce=$(ee,[["__scopeId","data-v-fd1b37fa"]]);export{ce as default};
