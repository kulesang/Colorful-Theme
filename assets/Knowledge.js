import{o as N}from"./user.js";import{d as g,C as B,a as D}from"./marked.esm.js";import{_ as V}from"./_plugin-vue_export-helper.js";import{B as f}from"./book-open.js";import{F as A}from"./file-text.js";import{r as p,p as k,o as F,c as a,b as t,k as i,e as d,d as c,t as n,F as M,y as T,f as y,w,i as r,l as $}from"./index.js";import"./createLucideIcon.js";const x={class:"knowledge-page"},E={class:"page-header"},K={class:"header-icon"},O={key:0,class:"knowledge-grid"},H=["onClick"],I={class:"card-icon"},S={class:"card-content"},j={class:"card-title"},R={key:0,class:"card-desc"},U={class:"card-meta"},q={class:"meta-item"},G={key:0,class:"category-tag"},J={class:"card-arrow"},P={key:1,class:"loading-state"},Q={key:2,class:"empty-state"},W={class:"modal-title"},X=["innerHTML"],Y={__name:"Knowledge",setup(Z){g.setOptions({breaks:!0,gfm:!0,headerIds:!0,mangle:!1});const u=p({}),_=p(!0),v=p(!1),l=p(null),h=k(()=>{const e=[];return Object.keys(u.value).forEach(o=>{Array.isArray(u.value[o])&&u.value[o].forEach(m=>{e.push({...m,category:o})})}),e});F(async()=>{try{const e=await N({language:"zh-CN"});e.data&&(u.value=e.data)}catch{}finally{_.value=!1}});const b=e=>e?new Date(e*1e3).toLocaleDateString("zh-CN"):"--",C=k(()=>{var e;if(!((e=l.value)!=null&&e.body))return"";try{return g.parse(l.value.body)}catch(o){return console.error("Markdown parsing error:",o),l.value.body}}),z=e=>{l.value=e,v.value=!0};return(e,o)=>{const m=y("a-spin"),L=y("a-modal");return r(),a("div",x,[t("div",E,[t("div",K,[d(c(f),{size:32})]),t("h1",null,n(e.$t("dashboard.knowledge.title")),1),t("p",null,n(e.$t("dashboard.knowledge.description")),1)]),_.value?i("",!0):(r(),a("div",O,[(r(!0),a(M,null,T(h.value,s=>(r(),a("div",{key:s.id,class:"knowledge-card glass-card",onClick:ee=>z(s)},[t("div",I,[d(c(A),{size:24})]),t("div",S,[t("h3",j,n(s.title),1),s.description?(r(),a("p",R,n(s.description),1)):i("",!0),t("div",U,[t("span",q,[d(c(B),{size:14}),$(" "+n(b(s.updated_at||s.created_at)),1)]),s.category?(r(),a("span",G,n(s.category),1)):i("",!0)])]),t("div",J,[d(c(D),{size:20})])],8,H))),128))])),_.value?(r(),a("div",P,[d(m,{size:"large"})])):i("",!0),!_.value&&h.value.length===0?(r(),a("div",Q,[o[1]||(o[1]=t("div",{class:"empty-icon"},"ðŸ“š",-1)),t("p",null,n(e.$t("dashboard.knowledge.noContent")),1)])):i("",!0),d(L,{visible:v.value,"onUpdate:visible":o[0]||(o[0]=s=>v.value=s),footer:null,width:800,centered:"",class:"knowledge-modal"},{title:w(()=>{var s;return[t("div",W,[d(c(f),{size:20}),t("span",null,n((s=l.value)==null?void 0:s.title),1)])]}),default:w(()=>[t("div",{class:"modal-content markdown-body",innerHTML:C.value},null,8,X)]),_:1},8,["visible"])])}}},le=V(Y,[["__scopeId","data-v-29b032bc"]]);export{le as default};
