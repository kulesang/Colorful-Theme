import{b as w,e as c,h as b,m as k,i as R,o as T,j as h,l as B}from"./index-BsMe8Fqi.js";const I={class:"simple-captcha"},S={class:"captcha-input-group"},P={__name:"Captcha",emits:["verify"],setup($,{expose:v,emit:m}){const i=m,d=c(null),s=c(""),p=c(""),M=(e=4)=>{const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";let o="";for(let a=0;a<e;a++)o+=t.charAt(Math.floor(Math.random()*t.length));return o},f=()=>{const e=d.value;if(!e)return;const t=e.getContext("2d"),o=e.width,a=e.height;t.clearRect(0,0,o,a),t.fillStyle="#f3f4f6",t.fillRect(0,0,o,a);for(let n=0;n<5;n++)t.strokeStyle=l(120,240),t.beginPath(),t.moveTo(Math.random()*o,Math.random()*a),t.lineTo(Math.random()*o,Math.random()*a),t.stroke();for(let n=0;n<30;n++)t.fillStyle=l(0,255),t.beginPath(),t.arc(Math.random()*o,Math.random()*a,1,0,2*Math.PI),t.fill();const r=M();p.value=r,t.font="bold 24px Arial",t.textBaseline="middle";for(let n=0;n<r.length;n++){const g=r[n];t.fillStyle=l(0,100);const C=20+n*25,x=a/2+(Math.random()-.5)*10,y=(Math.random()-.5)*.4;t.save(),t.translate(C,x),t.rotate(y),t.fillText(g,0,0),t.restore()}},l=(e,t)=>{const o=Math.floor(Math.random()*(t-e)+e),a=Math.floor(Math.random()*(t-e)+e),r=Math.floor(Math.random()*(t-e)+e);return`rgb(${o},${a},${r})`},u=()=>{s.value="",i("verify",!1),f()},_=()=>{const e=s.value.toLowerCase()===p.value.toLowerCase();i("verify",e)};return b(()=>{f()}),v({refresh:u}),(e,t)=>{const o=k("a-input");return T(),R("div",I,[h("div",S,[B(o,{value:s.value,"onUpdate:value":t[0]||(t[0]=a=>s.value=a),placeholder:e.$t("auth.enterCaptcha"),size:"large",onInput:_},null,8,["value","placeholder"]),h("div",{class:"captcha-canvas-wrapper",onClick:u,title:"点击刷新验证码"},[h("canvas",{ref_key:"canvasRef",ref:d,width:"120",height:"40"},null,512)])])])}}},N=w(P,[["__scopeId","data-v-0e772e74"]]);export{N as C};
