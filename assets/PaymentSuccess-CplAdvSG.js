import{b as _,f as b,s as k,h as l,i as s,t as e,k as i,j as r,G as g,F as $,x as w,m as D,o as d,H as M}from"./index-DmLllGbO.js";import{n as S}from"./user-B2DJrFcZ.js";import{_ as z}from"./_plugin-vue_export-helper-BKqSRVk_.js";import{F as h}from"./file-text-BfhBj4E4.js";import{R as F}from"./receipt-DtfYjVAw.js";import{Z as q}from"./zap-D-6-dfXW.js";import{c as C}from"./createLucideIcon-DFrmIa5Z.js";/**
 * @license lucide-vue-next v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=C("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),B={class:"payment-success-page"},I={key:0,class:"loading-container"},O={key:1,class:"error-state"},R={class:"error-title"},T={key:2,class:"success-container animate-fade-in"},H={class:"success-animation"},L={class:"confetti-container"},V={class:"success-content"},P={class:"success-title"},Z={class:"success-subtitle"},j={class:"cards-layout"},A={class:"order-summary-card glass-card"},E={class:"summary-header"},G={class:"header-icon"},J={class:"summary-content"},K={class:"summary-item"},Q={class:"label"},U={class:"value"},W={class:"summary-item"},X={class:"label"},Y={class:"value"},x={class:"summary-item"},ss={class:"label"},ts={class:"value highlight"},es={class:"summary-item"},as={class:"label"},os={class:"value"},ns={class:"next-steps-card glass-card"},cs={class:"card-header-compact"},ls={class:"steps-horizontal"},is={class:"step-card"},rs={class:"step-text"},ds={class:"step-card"},us={class:"step-text"},ms={class:"step-card"},ps={class:"step-text"},_s={class:"action-buttons"},hs={__name:"PaymentSuccess",setup(vs){const c=k(),m=D(),n=_(null),u=_(!0);b(async()=>{var a;const t=c.query.trade_no;if(t)if(c.query.plan_name&&c.query.amount)n.value={trade_no:t,plan_name:c.query.plan_name,amount:parseInt(c.query.amount),paid_at:Date.now()/1e3},u.value=!1;else try{const o=await S({trade_no:t});o.data&&(n.value={trade_no:o.data.trade_no,plan_name:((a=o.data.plan)==null?void 0:a.name)||"套餐名称",amount:o.data.total_amount,paid_at:o.data.updated_at||Date.now()/1e3})}catch(o){console.error("Failed to fetch order details:",o)}finally{u.value=!1}else u.value=!1});const v=t=>t?new Date(t*1e3).toLocaleString():"--",y=t=>{const a=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899"];return{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,backgroundColor:a[Math.floor(Math.random()*a.length)],animationDuration:`${3+Math.random()*2}s`}},f=()=>{m.push("/dashboard")},p=()=>{m.push("/orders")};return(t,a)=>(d(),l("div",B,[u.value?(d(),l("div",I,[a[0]||(a[0]=s("div",{class:"loader"},null,-1)),s("p",null,e(t.$t("common.loading")),1)])):n.value?(d(),l("div",T,[s("div",H,[a[3]||(a[3]=g('<div class="checkmark-circle" data-v-38887477><div class="checkmark-background" data-v-38887477></div><svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52" data-v-38887477><circle class="checkmark-circle-path" cx="26" cy="26" r="25" fill="none" data-v-38887477></circle><path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" data-v-38887477></path></svg></div>',1)),s("div",L,[(d(),l($,null,w(50,o=>s("div",{key:o,class:"confetti",style:M(y())},null,4)),64))])]),s("div",V,[s("h1",P,e(t.$t("payment.success.title")),1),s("p",Z,e(t.$t("payment.success.subtitle")),1)]),s("div",j,[s("div",A,[s("div",E,[s("div",G,[i(r(F),{size:24})]),s("h3",null,e(t.$t("payment.success.orderSummary")),1)]),s("div",J,[s("div",K,[s("span",Q,e(t.$t("payment.success.orderNumber")),1),s("span",U,"#"+e(n.value.trade_no),1)]),s("div",W,[s("span",X,e(t.$t("payment.success.plan")),1),s("span",Y,e(n.value.plan_name),1)]),s("div",x,[s("span",ss,e(t.$t("payment.success.amount")),1),s("span",ts,"¥"+e((n.value.amount/100).toFixed(2)),1)]),s("div",es,[s("span",as,e(t.$t("payment.success.paymentTime")),1),s("span",os,e(v(n.value.paid_at)),1)])])]),s("div",ns,[s("div",cs,[i(r(q),{size:20,class:"text-primary"}),s("h3",null,e(t.$t("payment.success.nextSteps")),1)]),s("div",ls,[s("div",is,[a[4]||(a[4]=s("div",{class:"step-num"},"01",-1)),s("div",rs,[s("h4",null,e(t.$t("payment.success.step1.title")),1),s("p",null,e(t.$t("payment.success.step1.desc")),1)])]),s("div",ds,[a[5]||(a[5]=s("div",{class:"step-num"},"02",-1)),s("div",us,[s("h4",null,e(t.$t("payment.success.step2.title")),1),s("p",null,e(t.$t("payment.success.step2.desc")),1)])]),s("div",ms,[a[6]||(a[6]=s("div",{class:"step-num"},"03",-1)),s("div",ps,[s("h4",null,e(t.$t("payment.success.step3.title")),1),s("p",null,e(t.$t("payment.success.step3.desc")),1)])])])])]),s("div",_s,[s("button",{class:"action-btn primary",onClick:f},[i(r(N),{size:20}),s("span",null,e(t.$t("payment.success.goToDashboard")),1)]),s("button",{class:"action-btn secondary",onClick:p},[i(r(h),{size:20}),s("span",null,e(t.$t("payment.success.viewOrders")),1)])])])):(d(),l("div",O,[a[1]||(a[1]=s("div",{class:"error-icon"},"⚠️",-1)),s("h1",R,e(t.$t("dashboard.order.notFound")),1),a[2]||(a[2]=s("p",{class:"error-subtitle"},"未能获取订单信息，请前往订单列表查看支付状态",-1)),s("button",{class:"action-btn primary mt-8",onClick:p},[i(r(h),{size:20}),s("span",null,e(t.$t("payment.success.viewOrders")),1)])]))]))}},Ds=z(hs,[["__scopeId","data-v-38887477"]]);export{Ds as default};
